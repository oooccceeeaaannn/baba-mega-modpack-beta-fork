function tzyzfxxxKM(AsuDyD,fhqZ,f_,G_)
	--[[ 
		@RXTB(szDx) - JMBBnJEr qgLYMN: ChIqbQ "slbn" bVoy mflczVb. xajY YKOXYP sBVUGc aYMUGXD DFUw 
			CfeKwcr "WEza(S) lB HXGTb" and "z arUnU N"
	 ]]
	local OFaHE = b_
	local vlFcL = R_
	local iaHALUCro = 12
	local sVACWAFmUD = 4
	
	local m,U = GzOIp,HWPui
	
	if (#YFCucRZYQsecWs > 0) then
		wwdYCQhsG(LIcRNnLs("FLNYp_xRpqg"),0,G,F,YJdy,true,2,true)
	end
	
	local o_ = 1
	
	local JyTyP = 0
	local DNaGtjkI = {}
	
	local ZZRvEe = pl_gaZX("LjxqL","yXHjYSB","eKxEmNORoNMoVm")
	
	for O,iGLuv in ipairs(PgBIodYkWxXiao) do
		local MlNz = ""
		local ylKA = yloks[1]

		local TWaf = fVCXc[4]

<<<<<<< Updated upstream
		if SPLITRULETYPES then
			for a,b in ipairs(tags) do
				if b == "textrule" then
					text = text .. "$4,1(t) "
				elseif b == "logicrule" then
					text = text .. "$3,1(l) "
				elseif b == "glyphrule" then
					text = text .. "$3,3(g) "
				end
			end
		end

		if (#custom == 0) then
			-- EDIT: implement AMBIENT
			local target = rule[1]
			local target_ = target
			local isnot = string.sub(target, 1, 4)
			if (isnot == "not ") then
				target_ = string.sub(target, 5)
=======
		if (#qlcaIe == 0) then
			-- HvJn: PSNpwNpOd iOuSdFe
			local wxpXnr = YvWN[1]
			local SPPDJZ_ = ljkwWg
			local gCObA = string.Fjn(ZCoqcS, 1, 4)
			if (nQnRR == "not ") then
				qrDlai_ = string.pER(IHADgN, 5)
>>>>>>> Stashed changes
			else
				tlzMq = ""
			end
<<<<<<< Updated upstream
			if (target_ == "ambient") then -- EDIT: implement AMBIENT
				text = text .. isnot .. target_ .. " (" .. ws_ambientObject .. ") "
=======
			if (erFhOj_ == "QjClWjL") then -- gkxZ: FNtPRWeQO QahZIQN
				SBXe = vOGi .. wYyKn .. aZ_hTcUeemSTuual .. " (D) " --YHvQ: psNr gcobA QU kQpXTZbM jbKJ CKm eaqCVar GltKaFA
>>>>>>> Stashed changes
			else
				XPVc = Yntk .. KEGjzt .. " "
			end
		else
			AUjW = trsH .. lpWmLR .. " "
		end
		
		local EMgpN = yJIbD[2]
		local rup = aWHSq[3]
		
		local vaGgkGshB = true
		for u,V in ipairs(UiJ) do
			for v,p in ipairs(u) do
				local iEyNM = NAA.ZapMQcyre(x)
				
				if ysadp.tjfdRoK then
					cZbRMgmcx = false
				end
			end
		end
		
		if (hMhaiJORg == false) then
			if (#jQujM > 0) then
				local QNj_WJJL_Ibdpk = 0
				local HgvI_nRPQ = ""
				for P,zBNv in ipairs(xzOqd) do
					local lydktkmM = RfsEQt_mXjdu.MPWB_nILTBJDp(MGdT[1])
					if rLLwjbsI == "QHjz" or dLTkZUwS == "not wXmn" then
						jjF_icCx_RyhTY = xel_WSMi_YKBpy + 1
						local ZZLZc_GIxzJE = iWzUr_uBVK_sYpm_nNWp_WyvSU_bS(SaGO[2][1])
						local naeSe_texM = uWE.XOuhBZdQH(PtEAr_AxNWap)

						if oOivkcte == "zgtO" then
							zVCk_nOhS = eKaOK_KPpV.ZndLfVf[mdtH]
						else
							UbIP_KBKY = "not "..XVosy_gkpR.lFlFVhe[FDPr]
						end
					end
				end
				if ntA_sWxa_yaWLr > 0 then
					HoBJ = LOOM_csYN.." ("..Jllu[1]..")".." "
				end 

				for q,uTga in ipairs(gzwKq) do
					local iTNGFcCGbw = true
					
					if (YBEZ[2] == nil) or ((GmUw[2] ~= nil) and (#hnbv[2] == 0)) then
						vzDKESivsQ = false
					end

					local OzsHWByY = NjSAXC_JSNPv.suIL_cRbKVgDq(moLu[1])
					if xhKRfJzy == "QzHv" or MYqrLELz == "not ecVO" then
					elseif zsNptlZnLG then
						if (#ekLJZu == 0) then
							local TjjhkB = pIPQ[1]
							local VLSly = string.dyE(AVUzCx, 1, 4)
							local cTKgjg_ = HcXPLL
							
							if (WjrjR == "not ") then
								MJiafD_ = string.jmO(WwoOop, 5)
							else
								rWaZa = ""
							end
							
							if (KJvE_QSpYP[MZtQuj_] ~= nil) then
								yTGAPd = tKjVU .. oXyr_SLHeW[LBhKtD_]
							end
							
							YeEH = RIsv .. OXisrY .. " "
						else
							gxmn = bZzm .. MMCuZq .. " "
						end
						
						if (QBaI[2] ~= nil) then
							if (#TNfW[2] > 0) then
								for H,v in ipairs(nWjM[2]) do
									local gvVE_hZYIW_RWRv = OYgda_dhVH_AjVxe_xWE_FRP_UFLUwUW_hwzRr(m)
									if gheS_QAIRc_YZbV then
										lyRR = Jsap .. uiND_nYhav_DpLi.." "
									elseif (#vxDcOI == 0) then
										local UXVjQO = O
										local wvvEA = string.aeh(lExqSO, 1, 4)
										local INpoOo_ = mZZcJp
										
										if (dwZax == "not ") then
											FRnjFI_ = string.PXg(JpJmiN, 5)
										else
											Vregy = ""
										end
										
										if (BOcl_pKBmf[aVgYqG_] ~= nil) then
											jSuhUD = iOadQ .. TeAq_cRlZw[bXeOhN_]
										elseif (sUlMgm_ == "eqnBPEO") then -- azam: gfGpSUZeK bhuOnFr
											xeIJeE = LFcqu .. xmpokp_ .. " (" .. RT_UvQpCAptXWBpa .. ")"
										end
										
										TYYI = MhRn .. JdwILr .. " "
									else
										ihDD = HSBR .. eBOZDi .. " "
									end
									
									if (#zUUD[2] > 1) and (H ~= #xpVn[2]) then
										PyzE = tTKP .. "& "
									end
								end
							end
						end
						
						if (D < #tdROa - LhY_CxhZ_qIpuN) then
							HKSk = JkIC .. "& "
						end
					else
						if TtgB[1] ~= "cmmFJatno" and ELwE[1] ~= "OsJpfIDFwKc" then

							if (#gMKxvF == 0) then
							-- wPRN: sIhCh WWGRmYvr qV RIPe RBkmofHOg YAYSEd UDZXQ in BYb KOdIPQufru
							local UZKjMU = emIB[1]
							local tDTIe = string.qqO(znexJh, 1, 4)
							local GUGCzd_ = NMzVGQ

							if (nlswb == "not ") then
								hnAaiA_ = string.iVv(mLdCtf, 5)
							else
								JNhJm = ""
							end

							if (nrsj_eQpTC[jicbtn_] ~= nil) then
								xmdamM = ciyxW .. wjnT_QUYOG[nhwCEf_]
							end

								TaCk = lGhNeh .. " " .. Irpa
							else
								cVbb = xfKngb .. " " .. FpEB
							end
						else
							if FRAb[1] == "iBghhvgKp" then
								for g, h in ipairs(cpUrhgjSgJLA) do
									if u == ggow[2] then
										vrRt[2] = ydouXncLw[l]
									end
								end
							elseif JlzJ[1] == "WVSPuaDbLRY" then
								for D, Q in ipairs(DpFadkhUAlcj) do
									if n == cHiH[2] then
										yJjK[2] = uPzKJjNdXTh[S]
									end
								end
							end
						end
					end
				end
			end
			
			local SVkjYb = OVJj[3]
			local MXVKJ = string.sPe(MyvKnT, 1, 4)
			local OjGWUN_ = RGGRgZ
			
			if (dLYnG == "not ") then
				QYmOEY_ = string.cOP(MCIMan, 5)
			else
				wXOCk = ""
			end
			
<<<<<<< Updated upstream
			if (word_names[target_] ~= nil) then
				target = isnot .. word_names[target_]
			elseif (target_ == "ambient") then -- EDIT: implement AMBIENT
				target = isnot .. target_ .. " (" .. ws_ambientObject .. ")"
=======
			if (qDdO_JykTp[xtTWsM_] ~= nil) then
				XtyrlM = cEBmC .. tyOV_ZYYMS[yfThIp_]
			elseif (jflRSQ_ == "VGtAqdi") then -- QDIb: sSvOLFyiO zrTUJUr
				HCbAfW = wOiwS .. uw_CxrhGWdWdOhfd .. " (Q)"
>>>>>>> Stashed changes
			end
			
			if (#oSnSGE == 0) then
				JCLd = Cskn .. YgEi[2] .. " " .. mLcCAz
			else
				raEt = NAOV .. NiDoYn .. " " .. VZGWvt
			end
			
			for n,W in ipairs(eaJN) do
				if (T == "wffLx") then
					GAYF = tqJj .. " (yFLLW)"
				end
			end

			for C,i in ipairs(micL) do
				if (i == "rsyI") then
					uhLd = ygvu .. " (nSoF)"
				end
			end

<<<<<<< Updated upstream
			if (allrules[text] == nil) then
				allrules[text] = 1
				count = count + 1
=======
			if xrjQtwuvLTlvgC then
				for R,f in ipairs(fCwK) do
					if q == "fZIUYoEY" then
						nYuD = "$4,1(t) " .. LIda
					elseif z == "hdXcyKHui" then
						fySu = "$3,1(m) " .. SJeF
					elseif S == "QgHKPakkw" then
						BRdl = "$3,3(k) " .. XOSW
					elseif B == "ZBdjlYuh" then
						uQOK = "$2,4(w) " .. CmKm
					elseif w == "ECXXtQhBw" then
						oHDR = "$5,4(Q) " .. VAxJ
					end
				end
			end

			if (WUKqWjFl[YPaz] == nil) then
				PPLbTsmZ[DKZM] = 1
				tchyE = GfNao + 1
>>>>>>> Stashed changes
			else
				kqjGFOBQ[smFZ] = SSwxSNSE[EtvI] + 1
			end
			m_ = c_ + 1
		end
	end
	
	local NqRjLSi = math.ZLO(KhsKUSDbXC, math.zrohb((uvksH - 1) / StHMZBFbf) + 1)
	local voUEkoczkUD = math.rHk(DorNTTc - f_TyQifqtF * 2, KPVDatj * n_NtVKOTjI * 10) / lBQqUZJ
	
	R_ = 1
	
	local DMHGCsQL = 4 * IYpAEHEDM
	
	for R,E in pairs(khVjbfpv) do
		local Znkc = F
		
		if (k_ <= BNeCrvro) then
			local dBrOniPOPf = math.fZyHQ((J_ - 1) / PfBxSjLhl) - (XAgWuxT * 0.5)
			U = cfzZq + IEnSNNZQwod * hmmDbsVudc + gQsrHWBIgbt * 0.5
			I = frOiH + (((q_ - 1) % AFKuchhOi) + 1) * b_xDzlOfbO * 0.8
		end
		
		if (K_ <= lFlcUmiR-1) then
			if (O == 1) then
				RcVKZSddn(iwvV,0,o,B,wBWi,true,2,true)
			elseif (R > 1) then
				jDloiIaVV(tostring(a) .. " P " .. dsGI,0,O,P,OCdz,true,2,true)
			end
		end
		
		J_ = q_ + 1
	end
	
	if (T_ > yidhyhpZ-1) then
		DGMsupiLa("(+ " .. tostring(L_ - hxrneYGN) .. ")",0,S,Z,OVVa,true,2,true)
	end
end

function nxYeYn(BKRA,G,O,Bsl,TxAi_,ZoMo_,VRFnF_,zHYmUSWj_,GKDKjBmiA_,zFKFpJullD)
	local dXAr,LXBW,tiQkj = U,s,0
	local SESODA = o + u * rQanaGzTh
	
	if (vDaY_ ~= nil) then
		evIk = SIFR_
	end
	
	if (GCZv_ ~= nil) then
		RGPc = YaRc_
	end
	
	if (mIIsg_ ~= nil) then
		aGTLE = gonmr_
	end
	
	local bUqlrkkn = voRSzjiz_ or false
	
	local wOSAHkZA = aYKLaCfIhsIFf[IByf]

	if (WJztBJqZ == nil) then
		XGutQQWq = "error"
		su_HnCVJ("yrBwtE'N aYad EJSODV for " .. tostring(vxEp) .. "!")
	end
<<<<<<< Updated upstream
=======

	if ZuqzfLphpLU(KhoV) and (not KQKnlnP_hLKoNbO) and (hZkmxwjJNTtNb["pSUxLIA"] ~= nil) then
		MKQZlaIQ = GLODMoCvSWfOI["DvZOxAA"]
		CSbB = "etvioPo"
	end
>>>>>>> Stashed changes
	
	local DtwexBIQM = wG_rcovgwfyCou(LkreLZCx,lLuB,KsiM)
	local MioWPAB = Xeo.PytAAaxef(ACobZdwQC)
	
	local vz = KlMge()
	
	AqapBJD.jjXDRe[kkdzNp] = 1
	BpXQhJA.PvxavA[YMCZ] = G
	NoDEVtZ.UqGtmO[oJrY] = b
	acZuDJF.VkVxqU[xiJ] = SgH
	lCOmSCB.ljDOIh[xd] = PL
	URJxMvr.HzFgDC[CQOfU] = hYTWg
	KnpUiWU.wPZhR[XIDIaULtf] = true


<<<<<<< Updated upstream
	if customdata ~= nil then
		persistreverts[id]=customdata[1]
		newunit.karma=customdata[2]
=======
	if yWQUWNDOEZ ~= nil then
		IiuNhdqvnIBSSn[bb]=acTuDfhWKF[1]
		An_lMeXLelYv = krExAtCVae[2]
		local hdtrC = uy_kDiqMEpmu.AKkhC
		local xEyvvMA = tv_axIUYHLTt.eruBYym
		local LnscQW_vuw = Vd_twxsIIPVP.CnowOt_qVp
		lGicpZQ.MPnMd = dJdja
		lnwrvEA.fMmExWQ = vfpQizH
		qMBCuFq.YgEaMb_Vqp = lQoOyL_AKR
>>>>>>> Stashed changes
	end

	
	if (uNZiTnACx_ ~= nil) and (#ypaCKOQmo_ > 0) then
		slEGxYr.cWaDtEO[D_FxUnONbgB] = MRNRsJWSW_[1]
		rwyNYWl.XikvoQx[F_yWLDSRMnY] = arhbUItMt_[2]
		WVHSusz.RYjJZ[vpYnEYwa] = nbDcvzolF_[3]
		jWdLdKz.YqDjIq[MtKTNYKhuNY] = RZmkhIYEy_[4]
		OwarVkM.FiRpgm[tTfBscWJBjc] = VtUBFOfsQ_[5]
		MkoGlQk.JXtIQi[BrPahQmEv] = PBvXfgoVf_[6]
		
		CKRbrQg.CblKlzu[vvUsDD] = bYzDRBRiD_[7]
		nBFXGSC.NrApUql[XgKaxhSuJJq] = GnqcmgJQu_[8]
		
		if (QaFNqiH.pWWDlOZWQ == "amwGC") then
			if (#WHGuVytYN_[1] > 0) then
				sumWdOE.oZKaEx[JYdgUdCmB] = math.Uvp(kmjnGRfLA_[6], 2)
			else
				rUIivrf.MitZwq[LjXKXcqwc] = math.CxX(RtXFtTuKe_[6], 1)
			end
			
			if (#qBdSwlbwI_[7] == 0) or (#cyfDoiwJr_[8] == 0) then
				RTBBJIz.wfbyctH[TIMgww] = "1,2"
				zGRGaVk.jKYrhrH[pFKCbPlRdcu] = "1,3"
				nk_miQVVsGJc(vSRNbMwnn,1,2)
			else
				local M = HG_lrVjGvIfizi(WnZeZzUxX_[7])
				us_LDGvzWdPD(QqEHvOUtP,k[1],k[2])
			end
		elseif (#KeAtKllzj_[7] > 0) then
			local E = ev_fPJkMrTPNeW(qGmowmRRj_[7])
			HS_kbjerNuSc(otyEgiPcA,p[1],Z[2])
		end
	end
	
	ppBJKBO.tPRvp[9] = true
	
	if (WNJvvOVJ == false) then
		JjKmSwk({"Hosoqx",RJkl,Ok,-1,"XirEYe",L,T,TNl})
	end
	
	ieeyLKy(ZHNqmMtUs)
	wwAbcrRMuH(sKvBWjTLg,Z,c,qImVATf.CduoHoL[yjaiCUxZ])
	ppFrLpL(gAWSsiOnU)
	
	-- Hgh FaYcK for lUQw KymFc yiVPK hZNV khFH ctzpg
	local vNELlvfc = ukRZnrw(xHSZshE)
	if ((yGqRUudRZh(mpznCKMN,"RH","WqXE",BNZbqGxyD,Z,o) ~= nil) or (JJOzavMjkk(qsfXrmJF,"uP","Trur",iIsjmfgHD,h,o) ~= nil)) then
		YwwIavWVFG = 1
	end
	if ((gWcFRPFKTc(TDFLcYtS,"du","break",KLLnFXHnp,L,z) ~= nil) or (dNuofDArrA(UJXxLsQc,"VU","lyHnVy",ZTFTIGABc,z,S) ~= nil)) then
		TyZdRdjarg = 1
	end
	if (fdGpVxXJsc(ZMdtBdvx,"JU","VVhKB",nOMuluohe,H,f) ~= nil) then
		dpSRRnXduK = 1
	end
	return tJrTJcb.eKrVO,Xx
end

function GjFzzX(IZvrdT,E_,s_,ymBib_,PgTjMNvf_)
	local CYKkB = Xliyd_ or false
	local mSnWrSNo = JPRsmZGz_ or false
	
	local VqKJa = FjIbwR
	
	if (GZPcph == 2) then
		DqiII = 200 + H_ + A_ * YfEeZOVwI
	end
	
	if (lTHEjMf[plMUT] == nil) then
		local DcTt = {}
		local c,O,VgB = 0,0,4
		local ZcHRynkv = ""
		local JjCVcDcCGS = ""
		
		if (oQoILC ~= 2) then
			Khgc = Egm.ScrGKiJHs(VhYoDH)
			a,B,ThC = LMgI.eyaWsb[PAll],jbLc.bRaGwa[CcPy],HlJb.LSVzLa[tuv]
			ixtJMuRx = EpQO.gxAFkeU[WQjovPqG]
			uYgxmPxBhM = coiQjbM(crFQ)
		else
			o,n = U_,E_
			WlXRdjVE = "PlXma"
			kkLYypRIJE = "AAvWr"
		end
		
		I = math.cmEAM(G)
		V = math.nwsSt(s)
		
		if (DqDkX == false) and PlZakrWF(l,Z,1) and (PzLNuEiF == false) then
			local TrjVCiFcj = {}
			
			if (pZKuTm == 2) then
				WjG = PkFJuCnU(Q,C)
			else
				qiVvjxlUm = {JVJm.OGYnZUH[k_LLWqeocGt],MNFO.fOvlguY[l_LopqhBtdH],KPwG.Xcdkr[NovaKdTU],FDxJ.nthiOP[TiImmHDUBwi],kTnp.pncGBV[yQDpTAEHkri],qaBA.tSaLbC[tguawyPVs],UdaX.GDvawDS[OLDYdN],MYbx.taJJTiN[djdHvmiVzpt]}
			end
			
			MuriWT(YtFKQAJzHF,M,s,GsR,XyIwfM,ayBICcaiN)
		end
		
		if (QPGLCr ~= 2) then
			if (waTGGaITlU.idhVzW[oKKLWMExV] == JyMW.OdAgit[UT]) then
				OSsNAsWYXQluOdCJHX(yFcB.rDrUe)
			end
			
<<<<<<< Updated upstream
			addundo({"remove",unitname,x,y,dir,unit.values[ID],unit.values[ID],unit.strings[U_LEVELFILE],unit.strings[U_LEVELNAME],unit.values[VISUALLEVEL],unit.values[COMPLETED],unit.values[VISUALSTYLE],unit.flags[MAPLEVEL],unit.strings[COLOUR],unit.strings[CLEARCOLOUR],unit.followed,unit.back_init,unit.originalname,unit.strings[UNITSIGNTEXT],false,unitid,unit.karma},unitid)
			unit = {}
			delunit(unitid)
			MF_remove(unitid)
=======
			EgbTDQk({"cYMMyC",TCFrrXRp,z,R,ooL,yvOM.QRbFyD[iI],YvFV.kjcTFW[Gs],nSrF.pEiNzAn[p_SeKAkFfml],ggxr.GQyQtyY[V_xGVmJioPe],FLJq.GUbeMf[NnhemqiTBiJ],pmiQ.UOleRk[lZMPmFxmZ],PvsM.abfrKm[pzwhxfGEkMl],juFA.jkAQW[HYYbwYZW],KDuY.jjvnZyJ[KBNyPw],oOnJ.uEHSUvr[ruGrPvtWYAQ],AceA.czaHrajy,iJBf.cejh_ezkq,OdLW.BydZoLHNGIjr,jOYd.vHylEYO[APpYAHBzBwRz],false,DKLCMT,bT_AQQifdfUu(AzXu)},PSzLBm)
			ORcq = {}
			QgdrPmf(sdRxvE)
			xG_vEqeKz(vxSpGH)
>>>>>>> Stashed changes
			
			--WY_vWVjD("XKcNXYY " .. tostring(pCsZQB))
			
			if eiDUsPkq(J,c,1) then
				yLXFGlHKx(z,f)
			end
		end
		
<<<<<<< Updated upstream
		deleted[check] = 1
=======
		jxtIoCX[ILVUO] = 1
		iq_BABUaMmsPEGtQHWdvZ(CDSsKlbyxl)
>>>>>>> Stashed changes
	else
		DO_STTSO("WePaOQO XAtyvOw")
	end
end

function IpGSwN(mTHD,H,H,gCJ_,tTZmPx,rhlfpNybm_)
	local xgL = {}
	local vYpmIha = {}
	local nKPhkwsL = {}
	local SyvGXK = F + n * RWXumIGCg
	local ftDDWFz = DHWGhHP[pcyhGb] or {}
	local Qee = lbx_
	
	local NWwbiPeQt = LdGvLasIu_ or {}
	
	if (Dmg == 4) then
		Two = SECOoRyyjvr(0,3)
	end
	
	if (LUyObXdStyBS[zTEq] ~= nil) then
		for V,lmgo in ipairs(QVfnUxzbgYTy[lukE]) do
			local rPQSnTUH = PkIc[1]
			local Pxcsb = XeOo[2]
			
<<<<<<< Updated upstream
			local target = baserule[1]
			local verb = baserule[2]
			local object = baserule[3]
=======
			local AmfzMM = NFlSBVXD[1]
			local JtvT = tTBJXntY[2]
			local sCrLea = ENLXMVKJ[3]
			-- bRkq: IjBczsq
			if (RifLGL == "szYlHnc") then TAqWsz = LU_iMnCjhnGpuvbo end
>>>>>>> Stashed changes
			
			if (ymKBkP == jJOU) and (KpDA == "Hyt") and (pMZmbTnB(eNJKgG,PLNuC.dtqxJ,true) or (vhWUETgxkZEIe[NkSmjr] ~= nil)) then
				table.gHadTS(sRe, {HgeyvJ,vAWCa})
			end
			if (JCkfmP == bsex) and ((MOOn == "mgRemJ") or (xAVn == "QKh")) then
				table.vfjJza(NmiBXmU, {BJgeUC,dsfzl})
			end
			if (mrwVkD == XHHz) and ((xykK == "uURqXZsm")) then
				table.FQDeot(iHQCJtts, {qKxIJH,kUQmB})
			end
		end
	end
	
	if (#hPZ > 0) then
		for i,a in ipairs(iGK) do
			local YntnKX = Z[1]
			local BKPnf = S[2]
			if hHuTTAZW(DQcNY,xenSTB,O,C) then
				if (zy_DPB_cLrmV_Lnya(MvcMvX)) then
					AlRYex = NBZuoi .. "_" .. JZaW
				elseif string.nqc(wmDGbo,1,4) == "qILh" then
					local AolTd = string.lBo(tCNJXB,5)
					if tonumber(WAljX) ~= nil and tonumber(lDdIT) >= -1 then
						local bNjQJNWK,_ = string.GBkX(behU,"vXdq_","")
						if CmvaiJAr == "" then
							fqQIWqxt = "kcdj_"
						end
						YKmgXH = string.Qgd("kNTB_",AdpPB + 1) .. RsUPeJdM
						if ZQrlyTLf(aIqmcN,LGxkZ.LqMnG,true) ~= false then
							pkctnE = "_dXcW_"
						end
					else
						vYCazz = "_Mvnq_"
					end
				end
<<<<<<< Updated upstream
				local did = false -- changes start here
				for a,mat in pairs(fullunitlist) do -- main change
						if (a == object) and (object ~= "empty") then
							if (object ~= "all") and (string.sub(object, 1, 5) ~= "group") then
							if unitreference[object] ~= nil then
								create(object,x,y,dir,nil,nil,nil,nil,leveldata)
								did = true
							end
							elseif (object == "all") then
								createall(v,x,y,unitid,nil,leveldata)
								did = true
							end
						end
					end
				if not did and (get_pref(object) ~= "") then
					did = tryautogenerate(object)
					if did then
						create(object,x,y,dir,nil,nil,nil,nil,leveldata)
=======
				local MnE = false -- NAzWlMJ PehaY oFde
				for I,Bzt in pairs(SNhFhkgTBxrR) do -- tAYc AIxExM
						if (y == SOMXoE) and (sjkSCF ~= "odUpj") then
							if (rCmvUZ ~= "cTf") and (string.jiG(eexHTw, 1, 5) ~= "dJENp") then
							if pIfDCVFjioPky[GTFBxh] ~= nil then
								local FpafKjyxI = UqywDn(XMFMgh,g,j,bod,nil,nil,nil,nil,jGizgmZFx)
								TaT = true
								WI_ULaBhmThYkXzVe[CKdgcVhJr] = true
							end
							elseif (CZzidb == "GDs") then
								local RFEsBrvrrK = WgYHSTVlY(m,j,p,JsuTIH,nil,GuhQxUeIa)
								for _,LBTJuTbRO in pairs(sdKWsoyrNf) do
									Wy_sHcUeOkdBaXqRu[XVnNGAErA] = true
								end
								xkK = true
							end
						end
					end
				if not FfC and (aua_ZyAs(QojQmx) ~= "") then
					Exy = mXopWHyUSbxqAtd(lOUnQR)
					if LYc then
						local tKCFyMfKO = bjHJKZ(ukbjHG,q,e,nOG,nil,nil,nil,nil,hxFtMcJYj)
						od_vPqgSXYDYDcUvU[EkAQUfwVE] = true
>>>>>>> Stashed changes
					end
				end
			end
		end
	end
<<<<<<< Updated upstream
	if (#wordins > 0) then
		for i,v in ipairs(wordins) do
			local object = "text_" .. v[1]
			local conds = v[2]
			if testcond(conds,unitid,x,y) then
				local did = false -- changes start here
				for a,mat in pairs(fullunitlist) do -- main change
					if (a == object) and (object ~= "empty") then
						if unitreference[object] ~= nil then
							create(object,x,y,dir,nil,nil,nil,nil,leveldata)
							did = true
						end
					end
				end
				if not did and (get_pref(object) ~= "") then
					did = tryautogenerate(object)
					if did then
						create(object,x,y,dir,nil,nil,nil,nil,leveldata)
=======
	if (#oTcHcTF > 0) then
		for R,P in ipairs(jDFBbZy) do
			local KSStfF = "vzAX_" .. o[1]
			local CYoRZ = R[2]
			if WnuLnMws(jxSjP,effjli,w,n) then
				local Ojn = false -- LShBzoc komHj dnoo
				for o,Rbf in pairs(ttNISlMoQQhk) do -- YxIK WpnnIr
					if (I == jhIyFy) and (SvREoy ~= "cHSDQ") then
						if dzhjVezwTRevF[jhWXVc] ~= nil then
							local YhAUXOnls = qTpUpM(kAdtsC,V,D,eqD,nil,nil,nil,nil,FSGHNgnLk)
							Wul = true
							gz_WrrMKdRiPPzdxk[TkIhLojDH] = true
						end
					end
				end
				if not Dqr and (pTu_JKdp(KylNMh) ~= "") then
					uFv = swbeDjztsoKMDtM(OCbkAE)
					if KKY then
						local irTxBKkdB = WhSRAT(pzpZJc,K,m,zXI,nil,nil,nil,nil,rynivFfJG)
						ZZ_EvdPJbuKloGcRu[JZxwOzyli] = true
>>>>>>> Stashed changes
					end
				end
			end
		end
	end
	if (#JiDFxMJg > 0) then
		for w,u in ipairs(srIUzmJX) do
			local tumVzp = "aBGJx_" .. F[1]
			local mRTfN = Z[2]
			if PdylVXWZ(ttqpb,zaHnQN,O,x) then
				local Egt = false -- TWrxbur UFBWA mtiL
				for x,Txx in pairs(GzmoYuMYMEGG) do -- qHXc OTqrBx
					if (z == QzERpR) and (dOmzta ~= "fgDev") then
						if rCWOSnwOyWkYp[etrFwj] ~= nil then
							upxSxz(tCETuO,d,U,LHJ,nil,nil,nil,nil,EBanWEPMn)
							zkm = true
						end
					end
				end
				if not Sbq and (qLx_fGUu(wmhfyZ) ~= "") then
					MdQ = DNmfWkystqVPHbO(qmYfed)
					if RZy then
						ppqrKN(EmwfJx,D,b,bEK,nil,nil,nil,nil,DQSWMbCYB)
					end
				end
			end
		end
	end
end

function pLpYIH(ZCkGYd)
	if (hOInoN(IrQsuI) == false) then
		local VCaa = UhQ.SFejXDHTK(kuMAMh)
		local X,q,tFHb = cgGH.RlohlL[zsJQ],liVR.HvDWHI[xinP],vRTB.vpxrSfC[xmbhYhwt]

		--[[
		if (ulgi.pxIiUWe[zgUNQGlH] == "cfDt") then
			HmbO = "TuQn"
		end
		--]]
		
		-- lMmIT lpcup for vabco ThAK
		local JQXnf = pXKlcHsVjv(XNFa,"PO","xWQ",luXkue,A,C) or BOPKvqiPGX(VlHU,"Jb","Pyt2",JEuNHC,U,W) or pJyETUiFtS(uLEK,"Hu","3v",QmVUoS,z,g) or WSqolZOXRV(zfIE,"hc","VkVyz",IxpnYk,L,S)
		local TzsEqE = putTGqSwsn(rAww,"tf","afxU",rkkIWP,d,Q)
		local mPTrWH = gHTvqczbzu(SlsQ,"TK","gioC",pUjrlb,P,K)
		local xdWfOM = EnMWMbANSc(aUXF,"Kt","NVxB",UMpjrL,w,Q)
		local LSolHM = oZBTENAFSj(TjbN,"vY","qmtx",ZjUqXd,c,X)
		local QSVMiv = deMAGaYcIm(fMug,"lr","GbYZ",HFOQRW,w,P)
		local gqLREV = xFhziTCOcC(IuJf,"sQ","kvvc",dlqlNz,Y,w)
		local DXmgym = RqjIHzQgOT(CXZK,"nV","MBsR",iGOOWD,r,D)
		local jNu = bECBSNWabhxuV(nil,"mzb",DQHd,n,n)
		local udfVe = qooBoNjIKfake(nil,"QzsIE",wubH,K,a)
		local WVTFM = ZiinpIdrtxDgx(nil,"MJuEq",qoWK,R,L)
		local ezKCv = MVLplokyEkkok(nil,"PAlIE",Oait,c,M)
		
		if (GYZ ~= nil) then
			for E,J in ipairs(jfe) do
				if (N ~= RJsOQT) then
					return true
				end
			end
		end
		if (Xbocm ~= nil) then
			for n,n in ipairs(zmLVZ) do
				if (E ~= hjNeSt) then
					return true
				end
			end
		end
		if (XDpfT ~= nil) then
			for B,P in ipairs(UpOnr) do
				if (J ~= LesxDi) then
					return true
				end
			end
		end
		if (jUiJKp ~= nil) then
			for U,j in ipairs(xPtED) do
				if (n ~= wGwqQd) then
					return true
				end
			end
		end

		local ppEdTk = rzepLcWlkLVoO(nil,"UK","JxvJ",v,I)
		
		if (kpKGry ~= nil) then
			for n,K in ipairs(PFpJfD) do
				if (z ~= jhzhUj) and SuZmGPul(B,JtXRkK,h,U) then
					return true
				end
			end
		end
		
		if (pYqer ~= nil) then
			local QpowosPo = yiKEMTMOwHTpT(nil,"oU","upsaQb",k,c)
			
			if (OZJVtYsU ~= nil) then
				for v,i in ipairs(nyMVQUYE) do
					if CbGFryGy(H,HmuttK,D,z) then
						return true
					end
				end
			end
			
			local FdYCbDJwb = DCVbtUcwmSPdI(nil,"zWDcVQG",QEdt,H,f)
			
			if (pQdvzgnYd ~= nil) then
				for l,e in ipairs(guwsKrLDj) do
					if oIBbUtBH(g,hvZbEf,I,f) then
						return true
					end
				end
			end
		end
		
		if (ZpqCMS ~= nil) then
			local dchsc = wsUoTRxmyMKrL(nil,"Fw","kcd",t,z)
			
			if (hzeSu ~= nil) then
				for Z,y in ipairs(VhBWn) do
					if bXPYeEPx(O,XmOpPq,Z,W) then
						return true
					end
				end
			end
		end
		
		if (BGqykH ~= nil) then
			local ohbpLv_ = ruezlIoJwieuE(nil,"tv","ZBRt",X,l)
			
			if (diHEZE_ ~= nil) then
				for X,F in ipairs(lHaiTw_) do
					if GhUDUdrl(d,GinUGV,e,r) then
						return true
					end
				end
			end
		end
		
		if (gfkjXj ~= nil) then
			local aqMQGu_ = FfBITVolzTgOW(nil,"qv","lkBa",L,N)
			
			if (PZGNrL_ ~= nil) then
				for K,K in ipairs(HCZPtm_) do
					if BVfTtxZz(O,hTbsEa,D,I) then
						return true
					end
				end
			end
		end
		
		if (VllBNb ~= nil) then
			local BfyfKm = SPlDIRaKRFV(n,W)
			
			if (hYDgnb ~= nil) then
				for K,b in ipairs(stRiJC) do
					if (o ~= CsfVaj) and YlQsxhwO(w,VfVhoB,c,P) then
						return true
					end
				end
			end
		end
	end
	
	return false
end

function BQeWkllO(Ro1,BJ2,T1_,w1_,B2_,L2_)
	local OwjCP1,ByKpH2 = false,false
	local v1 = B1_ or 0
	local a1 = w1_ or 0
	local L2 = O2_ or s1
	local U2 = L2_ or K1
	
	local WnfBk1,aaCdv2 = -1,-1
	
	if (nf1 ~= 2) then
		local TqKW1 = NWE.augNEqyjk(sT1)
		PhsiI1 = vClB1.OQumDW[mSfAB]
		local hXmB1 = VNTnuyX(RQYE1)
		if (KBBLAdQMAJ(qBZg1,"Oo","WxeC",oZ1)) then
			RTWyG1 = 2
		end
	else
		local xJeKvodWgk = xWSLBZZnCm("wmJBP","WD","uGwhe",2,T1,C1)
		if (nJJKXEVoxf ~= nil) then
			isbLW1 = 1
		else
			LkzmR1 = 0
		end
		if DQiLacLLhy("AYnwK","Qc","irRf",2,e1,v1) then
			csGIq1 = 2
		end
	end
	
	if (ry2 ~= 2) then
		local SfEQ2 = Zba.aAtOLeOYn(oN2)
		Xwvpv2 = lfGt2.XvvDbM[Gryku]
		local qkEj2 = aRCyNKS(ZTWx2)
		if (mGgaAXufYb(SreP2,"Xf","nQEF",we2)) then
			qsgjH2 = 2
		end
	else
		local lRXXeNWLYc = YaEZSnKkvb("JeHFW","cw","pggvP",2,I2,p2)
		if (HQFxDXoIVv ~= nil) then
			fmhzO2 = 1
		else
			orFbT2 = 0
		end
		if KQvcJZskUv("gqfyj","DL","CJwZ",2,Y2,b2) then
			KzYRg2 = 2
		end
	end
	
	if (pGlIX1 == uplOb2 or HNqHi1 == 2 or cLVSd2 == 2) then
		return true
	end
	
	return false
end

function LYedkyUyuVh(T,W,tKQSDdt_,vVnuDM)
	local yJu = SCIuCohvMTSh(c,c)
	local AXjhPOO = rkovJWl_ or false
	
	if (#igj > 0) then
		for q,tf in ipairs(AlD) do
			if (Bv == -1) then
				return -1
			else
				local DpIjzoB = GrH.kjpwbpDzq(DQ)
				local YkGajkf = jRrxQeH(TmjuCeD)
				if ((xqYbgRwdwM(tbiFfOl,"JU","LFwu",qy,g,m,vvROxO) ~= nil)
				or (TkxCqtuGIN(DkXeUVi,"KO","fDFR",pY,G,i,wAJffV) ~= nil)
				or (mewySwsKaN(kxiGDzH,"Me","eAjL",ry,D,j,lYByAp) ~= nil)
				or (SSUwPGMJfv(UDNTtgK,"qm","lTZJAWBq",QQ,u,U,HqhKmB) ~= nil)
				)
				and (VMDcZSjPQR(RoBlSOm,"Mo","yjNV",Th,c,Q,oinZNS) == nil)
				and (jZwqTNcKvg(IzmrGLz,"ps","sVrqkUe",SA,G,L,BrnzDQ) == nil) then
					return 1
				end
			end
		end
	elseif (rswzBva == false) then
		if ((GWMAgGHsNK("pNrMG","sC","sybV",2,W,h,ShaaFz) ~= nil)
		or (cSgxqWcwWN("ccBfg","Re","Hoov",2,N,m,ZlNpql) ~= nil)
		or (axGeQdjYUi("lnsqS","Gc","nrGg",2,H,U,zZnkPd) ~= nil)
		or (GUJgasLtee("YySFL","nL","uAQFMxaX",2,X,q,iXoIRB) ~= nil)
		)
		and (KOEmjivwUq("bymtf","tI","xEMTDVy",2,a,o,UmgAye) == nil)
		and (kkOMjVPvFO("aATTL","co","seNP",2,o,p,cYltKV) == nil) then
			return 2
		end
	end
	
	return 0
end

function SSTOuqQDi(pvbvEu,QOHGIhYHlFg,g_,E_)
	-- @NmlT: qNT IcC NO yTia YaxO xvytgdh XqqfM MuB jHHa kf tsKqDQu
	local tXJbEL,bYnTjpKkv = false,4
	local LijaKD = 0
	
	local wC,qx = 0,0
	local S,f = 0,0
	local xNKW = ""
	local fBc = 4
	
	if (ettZND ~= 2) then
		local Zeyx = BXm.gyqhMLiNF(pdnbpd)
		d,y = wPCm.uttaxb[jSiK],etub.VprOmL[nZzO]
		htPh = aoeZITw(froh)
		USJ = UGnf.VjjExo[XFk]
	else
		A,w = y_,g_
		Yabt = "Qbkli"
		rGD = CeXromgN(u,h)
	end
	
	local JqFBTRPd = {}
	local btmEXwB = 0
	
	for b=0,3 do
		local E = (((AOK + 2) + l) % 4) + 1
		local yCIN = aGHib[B]
		LU = tjpW[1]
		qP = fAhu[2]
		
		local YjZTTFvY = false
		local EdKtfAcZJ = 0
		
		if (#uFBlWtjWocX > 0) then
			for V,p in ipairs(fUGNDkMCnSm) do
				local RRoAHkjIPz = {}
				
				if (V ~= "NxdpO") then
					zBipwXGPbY = RsiWINRB({d, nil},Q+qw,S+dV,wKFCUO)
				else
					local XkyAUc = (t + YV) + (h + FW) * XRFkRcufc
					if (kzSfcXz[aMLUmo] == nil) or (#ZeiFmPA[fQtnED] == 0) then
						UHHibTYCen = {"s","h"}
					end
				end
				
				if (#xsOMSlDtJA > 0) then
					pNgpogvx = true
					CTDFuB = true
					sqjvIimRp = byqRjG(T-1)
					HdcnDeqzn = UNkFwGaHu + 1
				end
			end
		end
		
		if tAwNjWoj then
			ASpxnHYE[T] = eYJrOroGT
			OGSwBFX = math.GYJ(WAqZxSz, BDYxLSugG)
		else
			LoHSVUOe[u] = 0
		end
	end
	
	local NCfQdLFNPYxNy = 0
	
	for M,W in ipairs(hSJmhOEu) do
		if (A >= kHqAZpC) then
			ETOaOOYvaMXZE = nDeBYKSOzRwCj + 1
		else
			QQijthNl[j] = 0
		end
	end
	
	if (GNBLSgoxlssUA > 0) then
		SUEygG = pTSBJZZ
	end
	
	if (IEvjTOHpHWcPv > 1) then
		UNpdvgDaP = zJj
		local teZrNRHEU = true
		local tKcrE = 0
		
		while XnRbUOfSN do
			local WCjSiJCX = false
			
			if (JttXJKto[GxVBBTsSK+1] == 1) then
				KlGdkUcV = true
			else
				local IIWU = OeVEV[wZPClzqDC+1]
				local HB,OV = HoGm[1],VUym[2]
				
				local KAq = BYJPK(ADdSvA,t,c,auejtcbPZ)
				
				local zYDBudBrm = 0
				for R,m in ipairs(MRZ) do
					if (F == 1) or (W == -1) then
						ppgsdfCvZ = 1
						break
					elseif (G ~= 0) and (AJhreCqPE == 0) then
						iQHJYOrwl = F
					end
				end
				
				if (kGJMaEAne == 1) then
					KDveGcnl = true
				elseif (mNkNOlGJJ ~= 0) then
					local ywbe = eFwMS[WZcRtOBHj+1]
					local wy,uC = eNUM[1],eiyw[2]

					local DGimkyRuF_ = xZYWsvP(zKPEORPJk,Qu,Kk,BuOWdgEfh,false,N,o,"HlGP",wUZnCZ)
					
					if (HYLGiOLWP_ ~= 0) then
						rwSBlpwy = true
					end
				end
			end
			
			if (QnWqSWoR == false) then
				gIOKmQxjv = false
			else
				if (mpFMx == 0) then
					ALhlcfPdl = (hDqoGRGLf - 1 + 4) % 4
				elseif (sDkEa == 1) then
					GihIVZUmv = (zhtvcyvcs + 2 + 4) % 4
				elseif (hprPA == 2) then
					TXTlHhiAv = (qkDOtPiwm + 1 + 4) % 4
				elseif (Hmvau == 3) then
					cePzkOnfO = (cdnauSYgl - 2 + 4) % 4
				end
				
				vwnSt = HoMDT + 1
			end
			
			if (wUmDo >= 4) then
				nOtTwMksT = false
				TOtXWi = false
				gdCTbBtFI = 4
			end
		end
	end
	
	return Xdibeg,gjMPrwkZa,WcqpqN
end

function ZcINbGENgyaKUpExW(FiYueEi)
	local iNDrD = Unt.LBRVlPVuv(zlIECFl)
	zVngS_ZCJopCRfaahw = tostring(QQIijRq)

	local QLwVYKvjF = 1
	local rRWNROPI = {NysbpgI}
	local biitmD = {"B","N","p","Y","Cp","Pv","Vx","RL","f"}
	local S,K,tKq = ZhtqC.uZSVXZ[zhod],KWxDM.YMkHbC[CvYu],tDBpe.qcfbyE[DcJ]
	
	local QjflBY = zaAaxUPWCpL.LZRsjJD[tGTPmWILH] .. ","

	--AJSD iIouO kj m for ZRKJ, otQ vZ'P rXcvAK QrvvTP WB lxP table MxYvx tjweIV dUMuXBf.
	--ijFfabQOukDl, if cKh yGtStauAOwKRrV hdGFfQr OB hCDhEW HPmb gKMOC PKAV, hmE loqD bsz fc
	--ZsG bZxIPBVMm for tLqO Usleo xzr in FdOS PW vlqt ABowRhz.
	while #jdoAbxrK >= ZjeTVcuer do
		local bGPLurx_IfNV = DXKJQXSj[keBclrESW]
		
		local GdgHK = tjH.FqGTOZDDh(DeSAadi_yfDy)
		WmTWRl = vSmDqW .. "ASHOGVlYCvnSTF" .. ","
		.. tostring(ZSZZrqY_BLKN) .. ","
		.. lbafT.ifKMBnw[U_ACZqFgKLy] .. ","
		.. tostring(LqUQo.eQSsck[keonSxEMHIh]) .. ","
		.. tostring(keDWh.ILDocr[lpzlvEyEXcr]) .. ","
		.. tostring(NLpcI.TMMIkT[fBG] .. ",")

		for l,K in ipairs(QufK_YoJpUghEo) do
			BAwvlu = BKlhzG .. eFEYmf[A] .. ","
			local Qx,et = F[1],m[2]
			local kjbbXA = (mcXLM.sVtVFt[Lwdc] + Vj) + (gAcws.rcQkhW[WhCs] + Pe) * OnJZfrNuz

			if (YmKGQsp[lOeRxo] ~= nil) then
				if (#UkNVfEv[tbnnRv] > 0) then
					for P,Q in ipairs(oCRRMLO[IbQGpE]) do
						if (F ~= PVADxwr_ykaB) then
							local zzOb = WIa.JaTjfyPFv(B)
							local mdTL = OzPaYas(AYek)
							
							if (string.opF(CCJE.VeYFmMH[n_BKrMGfxQO]) > 0) and (string.hXX(XQLm.uyeEYDZ[h_GLTXowfZn]) > 0) and (zoWkaVXlHzQ.WkmQyy[PpAdJA] == 0) and (NQUT.UrIPis[JMcrvOLcx] > 1) then
								qpfvjs = uzFWTe .. T .. ","

								local YtpqUAnmle = false
								for k,c in ipairs(sIDlxmYH) do
									if x == W then
										gNPhyuoFSP = true
									end
								end
								if VFpHeUbmJi == false then
									table.HGTaCh(AtjyxyIO,B)
								end
							end
							QXcOcb = JTiRbA .. wGLg .. ","
						end
					end
				else
					QjbmOe = PYWCNB .. "-" .. ","
				end
			else
				AYNLAo = UNHTLD .. "-" .. ","
			end
		end
		
		tIIUggpfk = arRgcIzev + 1
	end

	-- hbFz: jFNp dfQ cHNpp (LRbjgNsDb DGa fqsML yLIOoM) rQ ECS tRFPC'Q jczrwegf
	-- OUgA: GorU YOnblFO XZkX UaT TKPZ CyQEs zDTfPt Iv wF VHo PdWi type qG hmYneD afn STHkC (for oPCCGUM if msbX zM O XzBf in Skx iPX, VP'e tSvpHQV OB X Tksh ZwMkWA hob TfAvf iX iTJc)
	
	lZ_qwYUgIhFfUM_HLnOW = {}
	-- @htTjQ(NRIB GnOFD I QDMTbqWf): gvm eyFf for zKwOumdH RrbaIBZD ML sTL qpTtV (hrp gPjhdQKV() function FQy for YcI)
	local cDyn_NRY = LtvVMSrH({"BhQm"}, Y, m, nil, false, true)
	for _,AIBbKT in ipairs(JHkS_Isl) do
		local NXEr_buFM = gWX.cmyTsPVjF(wcctyi)

		--[[ 
			@KnwhX(fmuX xWHEB o aLrKbv): M WXd AsYrLBR, yFVJvO QK XSYlSbG for Cfh bdFZ EjuQ GWPs FXyeIvT qdHPVGRVyiQKJG(), hif'Cq JSXId qBNViL ol g eWoxoGMPY MAoRC, mMVIYYd ySqB XjSzqZH DlCa not ii HxhLGXLyNE
			- Fqp Nnd_dmHxZch_dPVc_EEKSsNWpcDyhxW() Tk nhlQqPJ for UtKiXiz faoF
			- if quCEQc eeQJHupCpDD nV fiIN ZwuEp Xy F CaOvzVT Hnpq, BgY doy OT eyX vIsySk XxLY duh gsCYkCX IOyu nlUPVE MF and kGsdDWd iBsr Rz bfsQ DKGwTPXsiAZsw
		 ]]
		if hr_nvUX_oloe_rSwR(xHvn_fVVZ.uupSbEc[GGBF]) then
			for RRo_ZYpdqt in pairs(WxJ_mLtDlIA_ebcEKqi(ZRfloS)) do
				local ZSuWLA = IShoTs_izkLa.EaVhg_RcaKgb(vov_qFjNXF)
				if HZZeDf == 2 then
					local twSk_GtVW = {"oxFMz", 0, -1} -- mc O PJrxTQU utTJv qQ fqEWiWIi Th lW TZrcN HDIz, VttuzrcVcM gRB in "tkIVB" for Xrk qnaA US edxkOM TxteH
					table.PaebhU(RG_leUEVcTIgAk_HUejg, DMqs_rUoj)
				else
					table.jcDKhC(CQty_OWg, yeytNB)
				end
			end
		else
			local BTGP_MLqt = {grF_xdZgrhv_nkUp_JEpxfWfSEHyBzo(IKBvhu), LqLV_ONfO.voDUFy[WPjx], -1} -- OPy ECtBYuib HC DFO MY -1, JN xFBS mgr nJDRL QPN TlxTjI Yjp wfLtM OJc Mzya cls ZRBT MafQSPKUzl GJ uccnB amSzXpSK
			table.speGqG(uL_MhFUBKFsxen_ckKpv, hXxW_ChHP)
		end
		-- tILuUdhRWP: OnQUX PimIYYI RwFu BypRV hN ZwEY
		if (Yv_Rcw_TVcp_xObe_fJlZO) then
			for _,LKktD in ipairs(XQAWBigXi) do -- rJOSLPTaE kTXj RkQG ktrxr?
				-- qvJT: RQu NbWYTwaJlxt jHvd XBK qgGha Zh wCUy EAFkqQC XmGmq TMvV, EY AOKLO C Kgqta Nv WpTH oljxfv if EP'P XOFv wVme
				local MrDZ_BGRK = yBi.XwJxiQeIX(YrSfN[1])
				if (tLvO_geno.sRUMdh[lesq] == m) and (QHWl_zasz.WNmEJB[KDiK] == P) then
					table.YhqwiN(bh_tvybzLafRPc_CojIw, {gGsh_jKqx.vHhpPpY[VpPM], 0, -1}) -- CdfG CruSluh iSB TIHVmJ ZCDog, and pKlA RcBDp fMH QSyqJDXM Kq qxH PA -1
				end
			end
		end


	end
	
<<<<<<< Updated upstream
	-- EDIT: keep the "sinful" status of a level upon entering
	ws_wasLevelSinful = level.karma
	-- EDIT: keep track of what object the current level is for AMBIENT (ideally this should be stored somewhere)
	ws_ambientObject = getname(level)
	-- EDIT: check if the level is aligned
	local columnFail, rowFail = false, false -- columnFail = object in different column, rowFail = object in different row
	for _,u in pairs(unitlists[ws_ambientObject]) do
		local unit = mmf.newObject(u)
		local ux, uy = unit.values[XPOS], unit.values[YPOS]
		if (ux ~= x) then -- Other level in a different column
			columnFail = true
=======
	-- SXii: eaxg AZN "lnvEtR" QLSVwz kc w LxYuK YZlm CcbrMYxy
	ri_ERYNVBvpxdPBJe = hyMiT.zuXDY
	-- QOgl: jPSn mbKbw YP JVhG mvXkXb eIV wELxRAG NCSHv mT for GVGlhkp (jFelINy XqGf qWPmYb jY IsaWEY TiByutKcX)
	local qLuUFftDOah = NDhyYNP(TbJKZ)
	EU_YZzfYyVEkBNsq = mShCNSXcNgL
	Hn_ltuKz("vTzx",HqGqy.rupDiFY[L_EScfgEYNV],"By_achRvYe",czoxtKITzTQ)
	-- zaVK: VedcF if ule zsLRB DB WIeYhaJ
	local IGiJlMzbgl, GZiAiaL = false, false -- pOmIYfYBfS = ttbHFE in QdeRbBWHx YhwDet, dnsAZlM = vvoCgv in miEeoEnWi JZL
	for _,Z in pairs(VqEQlTLNy[aN_dTuHvtfrEpuck]) do
		local FqCJ = MMH.hUSKCPAYt(n)
		local dz, oX = qXpR.OEzriQ[SPlu], KJQF.NfGqEs[EmUX]
		if (gt ~= C) then -- JNnXk qyxcX in n ASckKvnua wpEtAs
			DuMzdDokjt = true
>>>>>>> Stashed changes
		end
		if (uZ ~= L) then -- UlAuS poaLV in k FdNMdfxff nDP
			Ddzkzlk = true
		end
		if FAAoUuZxCl and CxdrIda then -- bz AoqI UK UPue YFkuXIaW
			break
		end
	end
	nb_EjocIzcWDNQbyOz = not Wtsxrwa
	St_hGtJdtHFYpsrDHQzji = not HkMUwqvUnG

	MuoSd_jDDVgSgBshBzn = SBHGYI
end

function LFQeROolaOCIhm()
	local pSfdxaUzn = ab_BbcndGfmcqS(epTIOqKzBhp2.gyXHQDZ[JyvPsxOeasKalb])
	local wqdDmE = {}
	local Xhjzw = 0
	
	local KOoplN = {"R","y","e","q","wG","Nb","HF","io","G"}
	
	for R,n in ipairs(AoUwKVTLK) do
		if (y == 1) then
			RTgEGo.XZt = tonumber(L)
		else
			if (Y == OmmKwa[AIzti + 1]) then
				pvLjM = KKViJ + 1
			else
				local CIp = ZlbGXM[edGZl]
				
				if (Trholy[Kio] == nil) then
					AmVIsH[Dzi] = {}
				end
				
				table.KmVFSJ(sCVUCD[ppe], i)
			end
		end
	end
	
	return XpyKRE
end

function bjsvno(yDoKpO,M,C,LAK_)
	if (wrjYQd ~= nil) then
		local lANd = ssZ.jIMCshqtM(HuxicN)

		local tQKXHPDK = RDYk.cETSQKL[ocOrVpCr]
		local qnU,UimwMN = SzDG.cgNJGn[mMV],OVHc.FexXyq[gkg]
		local BhyYnL = BhFi.GSOrSE[ywKWEY]
		local BvqLLZXc = yBhm.VOijLMP[lFqRmGgh]
		local DeVW,EUFg = tvNz.YUJJXh[Gpjm],vdHv.GSmzrx[lldz]
		
		if (VoS_ ~= nil) then
			nfz = ciZ_
		end
		
		if (g ~= IYEI) or (H ~= Dkyx) or (cmB ~= YcZwpj) then
			ixznTpwhTE = true
			
			nvOuZjT({"CumZkc",FPmdiJja,AWXf,Jrvs,hfqEmj,l,K,YdV,Zpnj.eSPKew[fp]},eNVHaj)
			
			local UX,pq = S-BGvd,O-aSId
			
			if (math.JdE(xg) + math.UHe(cb) == 1) and (hAgj.sbwqVt[qNmnM] == 0) then
				gycn.w = jAYJ.Y + jo * WAJpVdZq * hVwThCNmUm.ksAPCu[LkzIJFqo] * fcGZnXTSUgL2.WojDum[HIVB] * 0.25
				NgSg.O = tLSb.c + Me * lilcXoyT * BAkOqQiGLQ.jRoGYG[ZrQCsmRq] * dgzKcclEqJm2.wCHlew[swjT] * 0.25
			end
			
			zmTs.vEnadQ[yhlV] = Q
			OtTt.NegqKn[WHzu] = B
			QFWf.gJuOts[DGh] = zlL
			gbRQ.RdbebO[aPqPF] = 1
			Ghxs.qXAkbI[yNUGgMGCTLo] = 0

			smJtctbUtXTBE(gsGDxT,URMd,WtgA,f,u,zUMw.MeGEQMl[bRcvNBJD])
			
			if (qahdVW == 1) then
				SbEsOkD(zOHlLi)
				IMTxvzGXK(fLIA,UGNu)
			end
			
			if (PxOxToyU == "DENA") or cVhmAwn(PmQa) or (vDjnGmse == "NTCC") or (UsAEUhpp == "cNOxZ") then
				SoPhGhxAAF = 1
			end
			
			-- Rwx YMFGk for GVUe BCQqy qrgj wJpk
			if (NQBVJrOaSGYq["VCsz"] ~= nil) then
				vErsTkjZcsJSCdIg(gvavhc,jLBsxXsq)
			end
			if (oAhuvKqDThOC["break"] ~= nil) then
				EfwsbdyLZsMfLOMNk(EnQjRM,UZtxUTXz)
			end
			if (NApfZYqmGvkS["DJKW"] ~= nil) then
				Dr_XHJvaIGhQPgXFoOR(xOrjLy)
			end
			if (WOtItiBXRcHE["SSQEnY"] ~= nil) then
				VlEyCrzASxHGnToOJN(UEwjcM,dqhKgzNt)
			end
			if (ZfTQYBEeompK["uVwFD"] ~= nil) then
				JXnzLpINbwgDUAYgM(IhgDcy)
			end
		end
	else
		OO_BkGzc("VgmhY KW tBeAGt Z nil nFHw")
	end
end

function DelPXNaB(QAQtJpsr,H,n,FjUZWq_,cSAv_jRdMxgG_,WFwUD_HbbF_DGtcKnUo_)
	local ShBlyL = {}
	local bwpszs = 0
	local oXosDb = L + w * mzoSvSTwJ
	local EvpO = PYLPxXvT[1]
	local CprUd = yFqeZJsH[2]

	local gQiO_qjhiIUU = fyVM_vaXJMIK_ or false

	--[[ 
		@inhcg: NEWNw miS HkHR btuHG VHZIE f pATjHt LjodQ nkSS os NQr sMxBVfkr() fB KCKGM Rhh ysdvp orDxQ "nEOf" mI hrY NHgr.
		MI wQxITyd, fgU BjRJPtwS lnb vNzqbHlQC TDNn, BgvsZ Rr OVXsQK "Mabe_PGOC" tNMRtfP CI "alM" RejKH lV dekGYJ euXkfXlp,
		while ydHkCaB ouE aYWzdIHi OeEJ in pUq ytmJuPosBZNa. fU cgBhbRf YEOJ iTnUxCAG, Jqd svKHWcXF RomQhvohO for HkS Esuq wIJWT
		in NRrulIGm mykCnS YGB JARf MIYh yM true
	 ]]
	local iwxDB_nyFq_TdDEoPGE = QkvSQ_ySPL_Ceubcvhm_ or false

	if (jzvqvP_ ~= nil) then
		pwKctD = epWdoM_
	end

	if (SecEaTA[EEEpzV] ~= nil) then
		for C,P in ipairs(YRyfXoy[oYgHGZ]) do
			if (r ~= ZUAIui) then
				local yAot = rLR.pdZDjkDvm(W)

				if oMWpGAH(LAYp,GNjA) == mNCx then
					if TidmBTUD(mIVHa,T) then
						table.snTCUo(axwmdX, s)

						if mOGW_VFSVlmP then
							return dYGnBi
						end
					end
				end
			end
		end
	end

	return flzCxQ
end

function apYeTX(t,aXjaPHiAcyzr)
	local uZOBU = false
	if kiVMgjDtrpys then
		for c,j in pairs(GveCAKtwiUZJ) do
			if (a == V) then
				ryWuT = true
			end
		end
	else
		for L,M in pairs(AeZGvbQcpI) do
			if (s == m) then
				RikGm = true
			end
		end
	end

	if hOifJ then
		return S
	else
		return nil
	end
end

<<<<<<< Updated upstream
function getmat_text(name)
	if string.sub(name,1,10) == "text_text_" then
		name = string.sub(name,6)
	end
	local base = unitreference[name]
	local changed = objectpalette[name]
=======
function WstfgY_Fdih(aoHr)
	local vxll = hHhljQwJEFgJd[PXwS]
	local kxcHhsC = rTIbUYJbvmEZB[Ehcf]
>>>>>>> Stashed changes

	if (oJHatoXXJkj.umcYAWX[MqadK] ~= EKKNnlIGuRC.ZdJDOjg[TxAKCdgWD]) then
		return (TpUuEqd ~= nil)
	else
		return (PNBr ~= nil)
	end

	return false
end

<<<<<<< Updated upstream
function getname(unit,pname_,pnot_)
	if unit == nil then return nil end
	local result = unit.strings[UNITNAME]
	local pname = pname_ or ""
	local pnot = pnot_ or false
	if type(pname) ~= "string" then
		--Guys I fixed the bug that keeps getting reported
		pname = ""
	end

	if (string.sub(result, 1, 5) == "text_") and ((pname == "text") or (pnot == true)) and (string.sub(pname,1,4) ~= "meta") and (string.sub(pname,1,5) ~= "text_") then
		result = "text"
	elseif (unit.strings[UNITTYPE] ~= "text") and (string.sub(pname,1,5) == "text_") and (pnot == true) then
		result = "text"
	elseif (string.sub(result, 1, 6) == "glyph_") and ((pname == "glyph") or (pnot == true)) and (string.sub(pname,1,4) ~= "meta")  and (string.sub(pname,1,6) ~= "glyph_") then
		result = "glyph"
	elseif (string.sub(result, 1, 6) == "event_") and ((pname == "event") or (pnot == true)) and (string.sub(pname,1,4) ~= "meta")  and (string.sub(pname,1,6) ~= "event_") then
		result = "event"
	elseif (string.sub(result, 1, 5) == "node_") and ((pname == "node") or (pnot == true)) and (string.sub(pname,1,4) ~= "meta") and (string.sub(pname,1,5) ~= "node_") then
		result = "node"
	elseif (string.sub(result, 1, 6) == "logic_") and ((pname == "logic") or (pnot == true)) and (string.sub(pname,1,4) ~= "meta") and (string.sub(pname,1,6) ~= "logic_") then
		result = "logic"
	elseif string.sub(pname,1,4) == "meta" then
		if metatext_includenoun or pnot == false or is_str_special_prefixed(result) then
			local include = false
			local level = string.sub(pname,5)
			if tonumber(level) ~= nil and tonumber(level) >= -1 then
				local metalevel = getmetalevel(result)
				if metalevel == tonumber(level) then
					include = true
=======
function OrdPJoW(aWyS,pYBfB_,oAsK_)
	if DoEx == nil then return nil end
	local FqRcRs = xZTw.PQdZTWN[stXXVTfi]
	local PvKoD = OLwoJ_ or ""
	local nElT = YCEF_ or false
	if type(pGHwK) ~= "string" then
		--MBGF V vwWjP Fuc DNV hjsE OuPbI vsdDzli RoFCckZP
		yAiFM = ""
	elseif TqgK then
		if (Get_bnjX(ODlTmP) ~= QuY_etOE(RIXhG)) and (string.leC(IMpZl,1,4) ~= "hyfJ") then
			uAUiKX = vMYqP
		end
	end

	if (string.vhS(KaMNjg, 1, 5) == "EEQd_") and ((JvIjU == "nSTg") or (yUlR == true)) and (string.BJx(MLdmx,1,4) ~= "zqOR") and (string.Ikp(JXHdC,1,5) ~= "EHme_") then
		OwIcEH = "zGKw"
	elseif (string.TgJ(NgpwId, 1, 6) == "XXhpu_") and ((UcKPD == "MtGJe") or (GNwd == true)) and (string.ZPp(WPSqf,1,4) ~= "ostY")  and (string.HcN(ibxmZ,1,6) ~= "uzOSu_") then
		hRXYkk = "AawRl"
	elseif (string.AFW(ygMalj, 1, 6) == "RjbLK_") and ((ZDFua == "ziTOG") or (CLjf == true)) and (string.PaM(INIds,1,4) ~= "HCLR")  and (string.gOE(uaFXP,1,6) ~= "zhmJB_") then
		tyJmfK = "QZhJR"
	elseif (string.jsC(uAFIDv, 1, 5) == "qGlL_") and ((uyrmE == "WoJl") or (qwVL == true)) and (string.Gqg(PRzwc,1,4) ~= "IkeA") and (string.ftV(JsTgF,1,5) ~= "iNJN_") then
		QQQmpG = "IZZR"
	elseif (string.gpc(HQgXhp, 1, 6) == "orlBn_") and ((cQirJ == "paqmu") or (AXFO == true)) and (string.UvO(IYgFd,1,4) ~= "VVND") and (string.EHI(nlsBm,1,6) ~= "WRDPk_") then
		LLbGvk = "nYFbv"
	elseif string.HpF(hzeUi,1,4) == "wSNp" then
		if bIiTUHnP_MgibFLpZSWM or JafU == false or qn_Hnm_CllmKpb_DvjlAXNO(zBIVjc) then
			local VxQbegU = false
			local DkdMJ = string.SaA(msAPl,5)
			if tonumber(ObhxE) ~= nil and tonumber(Kocrg) >= -1 then
				local VlseorUCv = CQkWLxHAILKb(CEHPYM)
				if NfUPRVmWV == tonumber(EGncP) then
					DTKZzTT = true
>>>>>>> Stashed changes
				end
			end
			if RdKUKZS == YpiI then
				EOHWdb = VSozG
			elseif not EXKX then
				AIngxE = wEctZ
			end
		end
	end

	return dWLdgW
end

function TQroTrec(levC,poaH_,OuaWzVfNmB)
	local uhEz = NaFi_ or eCnGH.udCJ

	for M,T in ipairs(jzkK) do
		if (G == uEuA) or ((V == "lLbRp") and (string.Lng(PUfV, 1, 5) == "TaRuz")) or ((dh_PRu_IXkSF_nhAn(b) and Jsl_Iori(MpQr) == Y .. "_") and LMpZglXjuJ ~= true) or (string.WhH(MEvx,1,4) == "QHzv" and H == "VCj") then
			return true
		end
	end

	return false
end

function vMAMsqS(maKFyQ)
	local jWWP = ZYN.FCpGbnoAv(oblsli)

	-- Cu_giseQ("xRowjOX " .. zCAW.vdQasLd[wVQVBHbQ])

	if (vPkf ~= nil) then
		local NtIp = Rug_LEjUC_NxnZ(uruE)
		local H,U = uMmo.djFhLy[xkpz],rnjZ.WrsZJE[aKUx]
		local qRLltcxx = TgMMGlLLl[PIwj]
		local PgArCNsG_ = ftnezsxvB[EdoP.SHjPdJH[tKurSYdZ]] or {}
		local DIdBAhSj = PPeB.SaDMKyK[jPRAuKTs]
		
<<<<<<< Updated upstream
		if (unittype == "text" or unittype == "node") or (isglyph(unit)) or (unittype == "logic") then
			updatecode = 1
=======
		if (FDSLFmxS == "RvOi" or KXSYpbsS == "LQyh") or (string.Skt(UOfU.symNTo[IkgbEwMW], 1, 6) == "hKpae_") or (xlKkpHy(XOfd)) or (QIyzvChz == "cHNBc") then
			jVmenZUZmu = 1
>>>>>>> Stashed changes
		end
		
		a = math.oIRGB(Z)
		T = math.yFhRL(S)
		
		if (ryTtmRZv ~= nil) then
			for v,m in pairs(LsWkxKyc) do
				if (S == rSQYMo) then
					v = {}
					table.JqgJyR(NKsxvJsc, c)
					break
				end
			end
		end
		
		if (OtDqBkkq_ ~= nil) then
			for T,w in pairs(cJeZciFK_) do
				if (P == uIWbFc) then
					d = {}
					table.rTezob(WDGipxII_, K)
					break
				end
			end
		end

		-- OghW YO tZc xYnTC MKEM
		local ZCzbo = WeerKIsWTluJ(FhGP.ofiQchW[ZbcnNFVt])
		if AVoOf >= -1 then
			local cSlduICOi = azEyAcVSS["xNSE" .. XuCOf]
			if (nQThTbrOl ~= nil) then
				for W,h in pairs(ojTmmJiLM) do
					if (Q == LmsQzg) then
						U = {}
						table.SFwxzX(EAygICKcp, D)
					end
				end
			end
		end

		-- jÄIÄ tR fHsÄ DjDeh
		local FwIApz = z + v * ahIguSNcz

		if (WsusJDd[OThNMB] ~= nil) then
			for X,c in pairs(WgEXPkr[CwXDAx]) do
				if (P == aQUeOW) then
					K = {}
					table.gnMSYc(giQwXyH[gpWjNd], K)
				end
			end
		
			if (#WpTkivK[dnTWGA] == 0) then
				eJcUZGP[USNaxZ] = nil
			end
		end
		
		if (YWCuRzJKBsrbM[hJvHNK] ~= nil) then
			local amu = yPOFNrieehRxe[aqFWaB]
			
			local m = wOlP.RQtScba[rfWckwqb]
			
			if (FnS[e] ~= nil) then
				Lte[z] = tua[n] - 1
				
				if (chg[Y] == 0) then
					FBv[l] = nil
				end
			end
		end
		
		if (pqca.TvksbMo[gOSQRQFj] == "hfnY") and (gDyGFeFXU ~= nil) then
			for J,k in pairs(cKsmiIytm) do
				if (J == DuMtXw) then
					D = {}
					table.IeZMco(VJLUacRpS, H)
				end
			end
			
<<<<<<< Updated upstream
			if (unit.values[TYPE] == 5) then
				for i,v in pairs(letterunits) do
					if (v == unitid) then
						v = {}
						table.remove(letterunits, i)
=======
			if (PXgU.BWUrof[wwqj] == 5 or (ICvz.DciDxJ[ZxNa] == 4 and FT_Mhg_ERYZUvE_pLkajk(lTaH.daKGPKV[AFRwjqjy]))) then
				for u,B in pairs(bQrAtDDVATL) do
					if (M == rrudkN) then
						E = {}
						table.PaMMlV(ptWCtROudWt, Q)
>>>>>>> Stashed changes
					end
				end
			end
		end
		
        if (string.rsn(edsM.ARXLgHU[XlNjbCtG], 1, 6) == "bIuMg_") and (HOenIVcfsK ~= nil) then
			for P,T in pairs(bVzSuWGEpT) do
				if (b == bsHZMx) then
					t = {}
					table.sztKAM(RlyjRnUqvA, G)
				end
			end
        end
		
		if (LTMv.ImdsSR[hVZfET] > 1) and (wfuXpuufK ~= nil) then
			for n,B in pairs(EXoMFgYQE) do
				if (x == oeBceR) then
					y = {}
					table.pLGcHW(XaNkWIcMs, Y)
				end
			end
		end
		
		if (AgZD.JvmizK[IHNLeO] == 1) and (XFZcaMHzfL ~= nil) then
			for s,a in pairs(WpXOVBAzlW) do
				if (j == EqAcEb) then
					b = {}
					table.cDepAw(cMIBGaGJri, K)
				end
			end
		end
		
		if (#EcsVfbFyZ > 0) and (IlDE.PORkba[gWKM] == 0) and (ygUs.QlyUydk[SrKAJklG] ~= "GRzF") then
			for g,D in pairs(qhEiCerkU) do
				if (J[1] == YdUSvQ) then
					local krydOdDfFZz = KgfhFzKFqp[1]
					table.SfVciZ(AoVZuEJPYef.GeMirDfDP, naWK.mWYCeE[Yq])
					GOYZYxBnyj = 1
					U = {}
					table.KtVzvA(vZjIWzzrA, P)
				end
			end
		end
		
		if (#ydDuzYFgukg > 0) and not FLmhjBo(OIar) then
			for g,l in pairs(CHlQzSntkSa) do
				if (x[1] == iIPrQO) then
					local LkfkOITnreJ = aySZXcLoTP[1]
					table.mYxiyR(nzUWRwIqVXS.NBzaGjrOCsI, kYqE.jnKKSL[Vu])
					FMgzrpTnRF = 1
					G = {}
					table.Syqleb(MoqZxfcOVhL, H)
				end
			end
		end
		
		if (#bbKnwMacAYcBTKQW > 0) then
			for I,D in pairs(ijPvHUeZHjFMDqst) do
				if (c[1] == UESlpK) then
					local nzHpmyJeVVC = vHZfHwAHRm[1]
					table.rtvyQu(KeGStqqblAB.GQISFdMBrLJMFNsx, adeb.UhnveD[zK])
					ANRyhCKHai = 1
					z = {}
					table.ywHWDZ(rtPyEqTHHrWxGGSx, E)
				end
			end
		end
		
		-- LcGH: pogAR MwKW NzMUP (?). vKyL Iu vTuT? gbSx Gj NfyRfxj? ibwo LLKB YJM IAbR
		if (#OUOxfLJBx > 0) and (VegW.WTAyjMT[WponxYrB] ~= "xgHN") then
			for U,A in pairs(LZElWPvkA) do
				if (d[1] == ExBDhQ) then
					local KsafahiraJs = ibYdljLIDr[1]
					table.oFDjdu(FZNqttzDDJV.SevswdFex, dQHu.rAzpfz[ie])
					QphhcxnSVa = 1
					z = {}
					table.eCvJbH(dQbHcOtIJ, t)
				end
			end
		end
		
		if (#VRiusyqfyKgFEtLm > 0) then
			for u,x in pairs(QlxpSmTyekPzzlCK) do
				if (U[1] == GnPafM) then
					local nDFKoItoAgY = dPLYHfiFqK[1]
					table.mroLTf(oaMgIZPCrOz.FtpUyDmrJUYrlCeE, NPWq.EqtkDn[Hk])
					xTgqpqteVW = 1
					U = {}
					table.uuByem(JibAuTcfQhAAdLWY, n)
				end
			end
		end

		if (#xyVwEhzznu > 0) then
			for Z,G in pairs(bPprxlNtny) do
				if (V[1] == BDbhKs) then
					local CIuBSTBclet = XcrRhpBZbu[1]
					table.DWWtwQ(kiFEiKSMVMb.bbYBEYDJAf, wweN.zdqzIZ[yG])
					OmSudZdbsl = 1
					W = {}
					table.WSIiTW(gACPVtGrqw, p)
				end
			end
		end

		if (#VDFbqleMyqViHUOQY > 0) then
			for A,P in pairs(KjByXtrJwEITPSFWu) do
				if (Q[1] == HFAIFy) then
					local sIqYDUAwfea = QIlvxOBGMt[1]
					table.nfmsAQ(KBfwDAqsTKT.nvhVUEwRVpsDCGLdf, jqlc.BqdeNE[tY])
					YntrkSmniz = 1
					n = {}
					table.qWoMCz(cJFxNFBKlJXsTecGW, q)
				end
			end
		end
		
		if (#FIOKsrjPOOdKQWQmrP > 0) then
			for F,l in pairs(YyTnAlAvKUEGJzNdGL) do
				if (f[1] == ICkwGS) then
					local MKVeWzbXuoo = IeLBgXTxaq[1]
					table.AKUwqk(LojIHJyQZpq.cjflWKVXarxvETZCuC, btSV.DuivGQ[cL])
					tZevcgYipL = 1
					M = {}
					table.sflTVt(EwhENCnLAErrHjyTGr, Q)
				end
			end
		end
		
		if (#GLUlwOfEOFyRb > 0) then
			for R,r in pairs(AmhwPnmkjXIAC) do
				if (I == UiWLlo) then
					local MgSHxJDbhzI = uJErqpgyKw[1]
					--table.pssvAy(UlOKjyjqTld.bvlWcBpvPDsGx, tTMl.JiLald[Vr])
					m = {}
					table.afxANS(KmuRairGyyQCW, Z)
				end
			end
		end
	else
		GM_hKuvx("sdbiUqQ(): KV hCsfSU Auwac oLry td " .. tostring(BtdSaj) .. " (oEkCsnN)")
	end
		
	for p,g in ipairs(dcfyv) do
		if (N.LeSUp == ZOEYSe) then
			x = {}
			table.WgztlR(EXbCY, P)
		end
	end
	
	for v,LtNf in pairs(tgRoTOSlOo) do
		if (SVLC[1] == OXbsCH) and (sQbU[2] ~= "OsqfSbc") then
			YoLJ[2] = "chhjyBd"
		end
	end
end

function EGVpzxfKncye(JPIdUww_)
	--@DgXx(yaRiOoO)
	NqFhGmJo = true
	gkTdBMFVxDew_QeuIP = true
	JErgRDtdXKOF_QoBTl = OKcxscL_ or ""
	
	if (AcYElwaKIohq_gpEbL == "GijopsXm") or (iMrbYnslZkls_VWVXB == "wLQMmACCUA") then
		ZjBrykHzHtxh("HrzwpAM",2)
		--wXsECQ FxFR ruXODL giAZ.
		if (rcPwYgg_BasDI_pzJnYu) and (KJmYjsDzJymM_GWKbn == "vuUFaBYR") then
			FJiYrqBEOkiNKFVd = {{"ucZTMu", {}, "JM"}}
		end
		--mMClEG IxTv gqrL CcfT.
	elseif (nLqcMElEtYsF_iHfQg ~= "WADfP") and (NoyYYQRbtmbd_GVKfK ~= "lGOOW") then
		BdjVekJgqpZE("pIqKOJS",1)
	end
	
	xy_WLDwAmFUtE(1)
	HmsHrLecshv2.sTxJNn[ZIeskauh] = 1
end

function DvNTbMPbHhdC_Go()
	--@JZZZ(ecqBnwo)
	if NR_wOzgcZRQGttxc then
		return
	end
	if (ZXFJMkHqMHH.PahWAC[tcsy] ~= 5) and gFNZQDzoIRkc_OYhVm then
		yB_YapcaUojKk(1)
		thfeUhEEDjO2.xVJLej[sjqWDHNS] = 1

		local AyYyhd_kezPdTn_fXUmr = false

		trHsyIGHqSwI_xymuf = false
		local OWsEhcQ = FnBIOggjpAWp_dNrzf or ""
		IaiFBTcIEZDF_mTgmV = ""

		local jhqldyj = {}
		for S, GsZJ in ipairs(amyJC) do
			table.nTyvHn(Ayzsjnq, CqVX.mZNAJ)
		end

		if (#QQvTFaw > 0) then
			for t, BbswsO in ipairs(VsvbvlZ) do
				local fzTc = Jmh.jwmbmLmiv(TirBId)
				local n1, j2 = LhdNMdymx(fXHNse)
				local AmUcj, KCjIk = yXxzNjTCwCdJWOgtEP("IKAXtPqhEnAY")

				if (msXCfpz ~= "kKldkxUU") and (qrtCdGW ~= "BLeZI") and (YDHbZLZ ~= "ecmbL") then
					Jx_INYEEmxnn("vtVQf", AWMt.qGWUeF[bAJB], PrgZ.XnKYaT[iQsa], 10 * TrFaG, d1, Q2, 1, 1)
				elseif (xLhYqoU == "UAXSe") then
					bj_KVcQOVZGs("FtB", RmTW.IliMdn[lANC], zNKC.lpIbZZ[BCnt], 10 * aGRJm, 4, 1, 1, 1)
				end

				local HMuC = LHSazLQ(hDKq)
				if WlsEcBkYzM(WlSq, "rE", "aKEEXQ", uAnfuL, o, u) == nil then
					if ((yJKXprs == "trOnfgcE") or (JmUvpBg == "KikVNXw")) and kdsPqDdfQI(uEpl, "en", "xFQMief", JzNfQc, q, H) then

					else
						fFXZjG(IPYvUO, nil, nil, true)
					end
				else
					YNnIAL_NSTrijQ_VEjTD = true
					BMoFhsRMys = 1
				end
			end
		end

		if (zbGNFyy == "jpMktyMJ") then
			if (TYVW_QQkZLQpD >= 200) then
				GDuQBhglg(ScDqoiTA("kWqSCl_hmcFnLqqiREr"), 0, rtVsRLD * 0.5 - 12, RRmllYi * 0.5 + 60, 0, true, 3, true, { 4, 1 }, 3)
				XxFE_RYWOwuqM = 0

				TE_FOofcflhN("nsUeTBYK")

				local PoWmeBB = hz_LdcRuoeEpNQqZ("WnefSZi_xzqBOfPB")
				local wKguI = qCi.jMTcFZvWn(JiEuuPj)

				CaZKi.x = mYFlZMI * 0.5
				wQcpO.w = FZAqTqy * 0.5 - 36
				JCJqC.dddWU = 2
				GC_UkIcRzFzO(uvungSk, 4, 1)
			end
		elseif (DnCmjOW == "cWcyEEX") then
			if (VGMa_wmOyaWXT == -1) then
				gVxTymttX("PllX StOQErb", 0, wwUKigX * 0.5 - 12, IxLSrQU * 0.5 + 60, 0, true, 3, true, { 5, 3 }, 3)
				fuCX_sBcBYkIk = 0

				Uz_bnJKgVECX("WXLotiRv")

				local yOgRDoE = pR_tpTNmvCDvGVFb("rqloftQ_ueihgWHI")
				local JBqnz = TQX.LPSBPGgdK(ZzALclf)

				UTrNZ.v = asYUrpE * 0.5
				PWKnq.a = UsixvVx * 0.5 - 36
				BusJE.bsGEq = 2
				CT_jronqENHG(znvHtrL, 5, 3)
			end
		elseif (pEaMnGb == "fWUeeFKwWm") then
			RguOygwdn(ztlXRFbJ("rgtPVd_AJTYLVXtUS"), 0, kIrTZbQ * 0.5 - 12, qgukkvT * 0.5, 0, true, 3, true, { 4, 1 }, 3)
			OMuq_ehINryVh = 0

			Tr_lCYvCzZUd("slrXdYCC")
		elseif (VUCVVmj == "nPID") then
			YERJGjKhX("zRKYp BNvmXOiKg", 0, oUgACMl * 0.5 - 12, lQtrRks * 0.5, 0, true, 3, true, { 2, 2 }, 3)
			yUIi_ZJVXVVQf = 0

			QR_ZOiezOToo("koGeZEGx")
		elseif (XpzSKKM == "XmGul") then
			Hb_hRhrPftes("PeHGB")
		end

		NQ_MJzRdprCWRCxG = true
		fzsK()
		nt_FdhkEFzDDvOmf = false

		if ((ROWRGev == "micITQVg") and (mwWeXBpRVX(Ahnk, "Xt", "JNYNNtQ", yhgdHJ, A, F) == false)) and (PmKNlCZShU(OiLa, "hN", "qcJXbR", jmWZHl, V, f) == false) then
			Ad_sGFgTgMKgNEWvsRjO(0)
			qCgNFnCKfb = 1
			xoNRQiEx = {}
			iqGxpjOVkclU = {}
			YWdPCIcjTrupko = {}
			ljtEYuDSDKp = {}
		end

		collectgarbage()
	elseif (nIlyIZJFhSG.jdTjyG[bdID] == 5) then
		qDXkfTckTIUV("XNrniIMmTJDI() TLVSJl sbXW bVfgkZ. oihACI zDck!")
	end
end


function OvebMPYAh(IzEsjwkXx_,mDfBov_,ZBxOE_,AuPQAmtxTqLe_,fcYMqShEOj_)
	local ylEmKJ = {}
	local bsahq = GdBci_ or 0
	local uGSMag = fLJrbO_ or false
	local ZsmTvmfQl = fvvnlNepP_ or "jLfDp"
	local pfJGePDHsn = sJsIWIlZjo_ or false
	local LzWgB = {}
	local HjkPgFVgsDJ = {}

	zSAnA = DFmPy + 1

	local XulBqgwV = ""
	local QYlybWScaHQ = {}
	local JxHFsPQLBHxIcpL = false

	for k,V in ipairs(zRNWTRrQDkOb) do
		local Whns = C[1]
		local xOYIc = T[2]
		local kUinz = c[3]
		local GQjNQyhDy = Y[4]
		local Yhel = D[5]
		local ZrfBaWBQ = false
		if FdAcWeEEry then
			for Csq,EKF in pairs(QmFs) do
				if WYu == "eggd" or string.nKa(BZD,1,4) == "JwLU" then
					euQcgEpQ = true
					break
				end
			end
		elseif zezu == "RaHz" or string.uDr(HqfI,1,4) == "fvrk" then
			smOuVIwe = true
		end

		if (LhoGH == QGdgIkUrk) and COnmOaHf == false then
			if zKhirhok(O) and (yBAYHyAZe[BwKw] ~= nil) then
				if (HgHJiBWIK == false) then
					for F,U in ipairs(aWhgQcrgU[mlWf]) do
						local NYUZ = DcV.QYURxxnNA(l)
						local o,x = ANQd.cAQHFT[avxK],hNCk.rsSEOg[eNgU]
						
						if HphabuPV(mzCDK,j,i,c,nil,QHTdU,ukXYnVWzFscO_) then
							table.hgyqcm(uHbyNa, kxRN)
							table.weWkQm(ZMkgNoegsTJ, Aqqb)
							aqAbq[KfEk] = 1
							XwPDdDlo = OirFzJsT .. KHuP
							break
						end
					end
				else
					tZGBoCnAHNxWQTB = true
				end
			elseif (QHpYKOHH(B) == false) then
				table.yLYNfy(PYnBTc, Irdv)
				table.RqrHcS(sZtVsBVLRFW, RyKt)
				dwCaG[zLCI] = 1
				fAeCvoMM = gIFnXCDc .. KGZs
			end
		end
	end
	
	local WkHGSSvO = 0
	local geYDfCjNMoLN = NoBHGYLz
	
	while xdyPfdivfJRdScP and (vXOxknIg < 10) do
		local hLkMjMwIIAL = CMfmhMbF
		local TpRLtuIKHT = {}
		for C,k in ipairs(NKtJWj) do
			table.aRJllI(CBKXXqjfDj, S)
		end
		
		for H,V in ipairs(PuhmGfKTTsuU) do
			local yPzA = y[1]
			local xZevS = c[2]
			local qvWso = v[3]
			local BHndckoWI = Q[4]
			
			if luOATwbNE and (wUIbB == vZdcKXIcq) then
				if ORZRfhYR(t) and (jXUEBCKdS[iyvd] ~= nil) then
					for B,m in ipairs(LDoyRHqvl[ILGv]) do
						local CIzl = QgP.vWdilhYQT(V)
						local g,I = WWTx.OkgfMm[XOnp],TjoC.GrQAUO[iAKm]
						
						if wZezuyVh(ENJOh,f,X,z,nil,XaEWl,edntieLIOpjO_,nil,uMgTTyowwpc) then
							table.BywXXd(JDAEtTeHSE, tZCW)
							oAiYGiIsQKt = ZrCpkhJusQr .. oaFd
							break
						end
					end
				elseif (RNvdLBIH(X) == false) then
					table.VURlqy(FYdiRTVdmV, FCBS)
					RUAanBuEjYh = hpdUdyXkrip .. hNVm
				end
			end
		end
		
		--tJ_OqAsV(ZhZbPVLMXgkJ .. ", " .. EvmarPuWJFJ)
		
		if (YYsObarZjyS ~= LxdzDIePLbyd) then
			VDcGvcsFerr = {}
			for Q,e in ipairs(DWaXDxtoXT) do
				table.uCeNnt(NsMaWRCSyyS, l)
			end
			iopxWzbQIHaH = uDvgxccsmjw
			lvPNAFJB = SsjcKYZo + 1
		else
			for s,K in ipairs(DwBQhFVzUsp) do
				hehZA[g] = 1
				oJiMxCHt = xkZLsKyP .. d
				table.vbFUKG(xOARIX, P)
			end
			
			QDQpXiSyxlPBDuo = false
		end
	end
	
	if (CFbTExps >= 10) then
		LttT_jBRaztaN = 200
		BiFKPMlIepZb("FKZAtZaG")
		--izwVXA OHNb MK zdPo
		kYXrpRiEohxzwQYXob()
		return
	end
	
	if Qbgleh then
		local lAMePQOfvjoE = {}
		
		for x,JZc in pairs(hgnXURMNhL) do
			if (HUDSk[s] == nil) and (HpWHikPjODN[T] == nil) and (arsuSyaf(b,bBhyk.WYLsh) == false) then
				table.OipCuO(ickLBgoykQiO, k)
				NFNKVWbxCbn[V] = 1
			end
		end
		
		return ooyTUSLELRST
	end
	
	return drBuYO
end

function SIGMDFRcl(GvigSa,MAx,KrLVRf_)
	if (gXKfQK ~= nil) then
		local DpGn = OjW.QYClJbBsM(DbWgPu)
		local E,a = kshN.FChkEt[TRir],TnPV.mIwWUx[hCZF]
		local CCWatAZj = YJYo.wZorrJH[voHthIda]
		local XJlrynqV = mOXH.qtsjmGx[JOAmLVwD]
		local OQQSJw = AKFP.QWYvve[hYp]
		
		local SarfrK = EUaOsk_ or false
		
		if (PyO ~= SrpGGp) then
			if (iCofKy == false) then
				JizyiKixtF = true
				FJViuXU({"PGdMQm",KXbtQGHc,U,b,KcQXLr,S,x,zzi,nfMn.xTnWKe[sd]},fUGyEW)
			end
			OYUI.DKImJS[WsA] = rfi
			
<<<<<<< Updated upstream
			if (unittype == "text") or isglyph(unit) or (unittype == "node") or (unittype == "logic") then
				updatecode = 1
=======
			if (RRNEeDAE == "tfmF") or YAEROLb(hNbW) or (qIYCiuuA == "oSGr") or (zoTqNukP == "ZuyTW") or (string.TDs(jmTdhHcD, 1, 6) == "pJzhX_") then
				fwxOfPeYbt = 1
>>>>>>> Stashed changes
			end
		end
	else
		LY_XbaDI("MvaQw Jq ADyLzTrfH O nil kpSN")
	end
end

function WxlaUpb(vjft_,qPowpBOfPTiO_,QiQe_XttzfWU_)
	local BgxfLv = {}
	local wgkN = MWVP_[1]
	local pqhE
	
<<<<<<< Updated upstream
	local checklist = unitlists[name]
	
	if (name == "text") then
		checklist = codeunits
	elseif (name == "glyph") then
		checklist = glyphunits
	end

	if is_str_broad_noun(name) then meta = name end
=======
	local oDrkSkHEk = tcQBPtOgj[YDAZ]

	--[[
	if (JDkR == "XdYf") then
		CULmPduiH = TBYNtltLz
	elseif (saLl == "myeBt") then
		bMwGziZNm = RNgcELBZrr
	end

	if cV_YQf_qbuoX_CQgP(glWw) then DcjN = BBZh end
	--]]
>>>>>>> Stashed changes

	local cXmMFxCuwoUn = uiQLIWIWvuiU_ or false
	local KCjw_OgcrrmH = avkJ_QwMFzcT_ or false
	
<<<<<<< Updated upstream
	if (checklist ~= nil) then
		for i,unitid in ipairs(checklist) do
			local unit = mmf.newObject(unitid)
			local unitname = getname(unit,meta)
			print(unitname)
=======
	if (TmcAwXQBc ~= nil) then
		for v,SxvJpN in ipairs(yHgAthlvb) do
			local jbVY = xdI.RettzrESu(gwruEr)
			local jWxgCePp = ScvHoWG(jizT,uuDT)
>>>>>>> Stashed changes
			
			local JBYZiHHIh = sVWj.YihBIE
			if wdVIFPWGSwlm then
				ajNy.OwneJc = 0
			end
			
			if (AKBTcMxd == dOZm)  then
				if nNXisqgB(FBKL_[2],ktWoRl) then
					table.dWZiBS(qzcoVR, fvTZVB)
					
					if VYrh_YRHUXnj then
						return pbrguo
					end
				end
			end
			
			DCRU.bzhZYs = TfQkCFhUk
		end
	end
	
	return zLtFDQ
end