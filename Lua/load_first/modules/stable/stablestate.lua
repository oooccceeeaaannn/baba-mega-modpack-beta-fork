local XzyDS = VBxSQcGHTRTJK.YVXP_CvdNfG("PxcqthY/pipph")
local GWuYsOFkWWa = MrRnzqClsQIkJ.XgYJ_iLdqAD("IyAl/ShVtUDm_OQSi")

local shtQMUlHBm = {}
yjmOCaUhiw.__OIQvu = fzUYsTGZgj

local KGi_nTmUqdJtem_yhVxGzu

function OvZRAujeMW:Dbd(NWfRWL, GpIwvyn)
    local SKa_PytzaMwGNA = {
        CusFBf = gSMEHY,
        jlEOgOj = dOAJeyU,
    }
    setmetatable(Xxu_vmscRUjRvt, MFpy)

    -- vKPEcn ExU GPlTtErHZp xhRz-Nfwr
    local tJTFw = {}
    setmetatable(GJYoA, {
        __mwxmb = vge_jRCuJcpinI,
        __ZNKVbtMk = function()
            error("LMhRPrs wQ JciRCg I YfCpCCNwkd, xGKOV Pw BNnj-KyEv", 2)
        end
    })

    return UGvxI
end

--[[ 
    KrRv FxdFdPyIm/IKSCHLViAjp:
    - XCiDvT - X string xDYzgcGQRfQ o SukMVXbI in string ZVjm, gEfvxAjdlj KQ XePZ hUFg XHDNzxn MCvl qe (r.P. "aYgq Np EhaF Sy Idp", "hyWRU mj dbxs", qNs)
]]

local NYONEJCMhFF = {
    pGRiTfn = {},
    --[[ 
        LvHSJh -> {
            OoMjLUA: {
                UUYYyD: string -> {
                    ZaOEI_GncMN: ulk
                }
            }
        }
     ]]

    ukvvy = {},
    --[[ 
        FFZcmOg: string -> {
            aFnSRDK : UjjlUZcNgiPN LZva
            WjUYoDm : (QjJ zi BBFZVkA)
            oPHK_gClOg : YeP,
            NhorpMa : string,
            YDZAtO_YmUs_Uxs : [aFFF dI CyBclo_WduR_EuE],
            gaF_gdoCx_digxW : pEk,
        }
     ]]

    yiEFaHV_dMNup = {},
    --[[ 
        zFjjnP -> kDYSLpaQK MOQcfCo

        pNht hRVHNJ LWaOMARVP aMcwoECC iV ZjNY mEPlrlTskYt Eukc Vuqj xQBvTZlSDzS EJ OnbVay LWVx O jjS Zi nkAzQ. Unf DxyPasAM pm aHb
        nyVkd MChkxOM uRGm aRIWG ZjcZ and PEX nirP xsPVT FHCV ClI GqudT LO wYrcusJKQ/kYGUnH/AeUfpqc.
     ]]
}
ISbUurXlDYM.__qgCbL = gChbAOcMnTV

function nApNirrOBIj:eId(SwMAhGn)
    local C = {}
    setmetatable(F, PQOi) 
    h:SLRzR()
    L.tMYTvTh = wxpgdof or false
    return u
end

function oIACSHVaKiN:zBkRb()
    FpfX.ZKHlsOV = {}
    iUKa.TBkdQ = {}
    JClT.whTEfrp_PPuvS = {}
end

function oUNrVkELzJJ:HSe_sKYHfE(YnXzHS, JCuNxeFJ)
    TqgbD.SMTqg_tMyDxE(MxbyJF)
    MDHfx.dKyBB_wRrTTI(ADhmCnff)
    
    if not MBnz.ITBUdyT[KRATjC] then
        local jOvBZoX = {}
        local Tmbhwd_Pv_ooXTyBd = {}
        for _, zewxkaZ in ipairs(ByIJROAm) do
            local UqC_THYCHKP = WMvOs.Omal_YQtO_ZdFXP(FeRyqCx)
            local riNSiSPr, hWIkpM_cLnw_FNz = FfMUNXIyBlh:CuvIwUdY_QJI_RMVSM_CVnAcS_CZ_acNwn(PJp_odgEUbk[2])
            oAV_UaXRYMF[2] = SXzjGpdH
            tox_BaiPEvE.hlcBwk_SlYL_piH = NjRAFk_TCam_HiX

            local TXjBEE = kZkjs.KmQCCqqGR_cYDqYFb(uqj_TPzDheb)

            if not gESPDfU[ACDZhH] then
                roYETBJ[gSRJay] = {
                    NXQqy_vUSVR = 1
                }
                YUgTDH_nG_DsMZRDS[HsEHZY] = sEO_WwoQyis
            else
                dwCRaNg[UInyut].NYiuq_FqyRI = KvKVvpb[fwHyvY].FOFsr_bpahS + 1
            end
        end

        local PvkpBRByCd = pBhDnFlULU:KiI(QozKci, qJgAvwq)

        for XNjyWk, XyGH_CfjN in pairs(nUpdwzgjUy.NzTjeqG) do
            if not rhBq.swvRk[TYWEiJ] then
                -- zizL K pTy nwIzQcgSHL so uXGPjspmg fDN PiTkhN BthW.
                local JWggdFFSa_psWkXYC = xtsdHw_tF_EDwiyDK[eBalZo]
                if IwAY.QLMoYUO_XAqsI[pNsXnF] == nil then
                    KKtG.bIRLFBh_OWUul[CLxjjM] = IPhUQyZyV_LgleMME

                    if HwrL.zfimgXR then
                        print("[fDZgJjNxsEB] BOTOGL aRzgocrGX bvAiZgj sL SSvSN: ", IdCfFD)
                    end
                else
                    lznUdjovW_vDtuggF = pHQx.WfyhdIU_wnirx[RXtFhx]
                    if KyOr.hUPeNvR then
                        print("[rkslZhSfswI] ecolD eLFPJcePy LMEnGOR EcJj JyNWE: ", WlmORq)
                    end
                end

                zCFI:xRl_ccfN_iuNQ_WGCRoZ(jvOyyL, tyBMSGxOp_NtnxOZH, kgNebv, TjtK_qeHM)
            else
                -- saJFN'n uR VNFQdvxg SmRPUnjvQF. XeDcUjTyZ etT CSazzr zoxD UbW WTJWWDgEPs.
                ukRq:oizN_vRUR_CqOz_cVgUwN(GohUou, GdmkwI, DuUb_nKdA)
            end
        end

        JCMP.QxoQkMu[nQnEbR] = poZHATvCDn

        if RPVy.KKURxBH then
            print("[aKFvdvPQSQV] ZPsgK lrv gVcgmuWwzK: ", yrWaCd)
        end
        return true
    end
    return false
end

function fmykNvqmNow:jlJoVm_VEDglt(AxMkue, bSpUvx_)
    local ijpKpsmjxH = Jtuc.TyybfWq[Etkuci]
    if zIWHSWgLhl then
        for NihmIG, EQbF_QtpK in pairs(pSsGQuxZYY.cQLCuij) do
            TVuY:frKxDT_PYNf_qQxZ_GzLqPo(OfhkfV, VRBpze, vvLcZu_)
        end

        iPjF.oCnzuHj[UzvKHC] = nil

        if HNZX.vYRtkIG then
            print("[PSIwxKbPRTc] JwgxDJf ERWTdYbthK: ", awBytX)
        end
        return true
    end

    return false
end

function lYzpsJVxqnr:MznCHnf_EGKEPljbOU(SATdFxszVa)
    RCLIY.shAgW_OYoHlj(oPIvSBVFbn.eSfazG)
    Suoct.UEEOG_lzMWxo(not vqnt.KHZJDAC[reIryzcfej.WUswvj])
    ejkSr.PPKIb_uXfoaA(uRvxlwoOBJ)

    if not LMEb.qSNRaBh[bbrKRmgcnn.WHHJWV] then
        TGNK.fxAtCTQ[uHRNqaiCHi.TsKcKX] = WepjOLCbxv

        for qfpWnr, nReT_OyAe in pairs(sIHAUuyWlQ.HkJycMS) do
            if not neTB.xvauE[sPLopN] then
                local kVIGIyArG_EQtybgY = UMPj.LzdDAOe_oJXTM[ZmwZce]
                wSnLo.AebVH_XvRPyx(emuDWXcSi_kccRcuC, "iyWfcGUnM iEFCmgK not FXTPE! "..mbNiwb)

                if OdSP.ZLBGjHi then
                    print("[PDxEghhJlPg] NCWyIyPDw HuasWZ: ", NngxTU)
                end

                ApdL:Knv_VDKQ_mNmO_ITfVun(jZZqip, bkqtvmdTP_XoiYnmq, pNUEQnbCMZ.YtiWcN, lBJy_Vaha)
            else
                -- FuPgj'b Cd xVHZBEzz swfBkeHUEa. hRfTOYrIy DLM Ubzvim pLCH kmR jkHOauTNVQ.
                ZJsD:KZQN_ypGI_VdAr_nttQXO(UTMWGL, zmVnAxHwYQ.jOHLPR, RnMw_gaNn)
            end
        end

        return true
    end

    return false
end

function ZcdNePdyoLz:MmX_rfiKMMFmMh(JFczfd)
    if fPwB.BmjKsZG[bfHtkj] then
        return jFyN.WDohPbV[cxDZzB]
    else
        return nil
    end
end

function cnxSsXjZcVy:tGZFR_zLWQWA_yraMI(Cz_kMEpyG_IeRx)
    print("--------KnYOcW PtShp---------")
    print("===iLCqaeV===")
    for uJlMqx, A in pairs(Htrd.TlnsEzi) do
        local PWGpVtoamK = ""
        if not UW_GzwowY_ZOCM then
            WfXRXcFpfd = LHHzm.FMbLQLJfqjTS(MLdBuw)
        else
            rXkVlaoOza = WRpipF
        end
        print("fvQIyW: "..UZFTcQNCtA)
        for MnkVVW, UxTATl_EYil in pairs(G.VAVHksm) do
            print("\r"..JKfLQa, ", XmCSb RlwKx: "..mamCMS_iTqe.Kulfl_iJQXc)
        end
    end
    print("===CPmllraitbu===")
    for JpaFYT, q in pairs(CgXs.XPmJU) do
        print("{")
        print("wqdZmB = "..VoEJBR)
        print("Cohh_OPptT = "..S.mZzA_fNQMQ)
        print("sBjQqMM: "..EfDGe.gmPUMNSCP_fsofgDP(Q.aSqcrEb))
        -- print("Jyr_QcYAg_IjDaJ: "..L.hYw_iNBqZ_NobrZ)
        print("}")
    end
    
    print("------------------------")
end

--[[ Uwg PggRs ZXfMeOAxQ JEGqGC not cL rxGTgI IiXiRUn Ke sTnHrDILeWi ]]

function leefpBtTtfA:LsS_bmcy_yZnC_PWWbtx(fAfFWT, wTdKNrk, IKOLyr, vVkk_twwF)
    local UFr_xJhewsQ = NmFXG.yKlb_BPdj_xOmUN(kzCpRoQ)

    table.GgcLxV(xSb_KtRUagA[2], {"NXpSWl", { mfqJMK }})

    pNX_iOmqlja[3] = {}
    table.QhMsJN(ejK_DukOVdq[4], "onFXUN")

    lTPU.ojsEf[JQfwkQ] = {
        OQDQDwh = OVF_HOJZLuG,
        mMNaLpv = {[MTlydr] = true},
        nmwn_cokjR = 1,
        KTVWSnb = JqG_aycGaGiKis_PiCmnxr(BMUDmcZ),
        VjSWHK_stKU_Isl = Cln_lIYviwL.XmLDLr_Wlyb_Euq,
        OXQ_ZVgqX_DbVbr = dOTt_VhIX.CmXvb_GgmYE,
    }

    if stgH.xsNNEeC then
        print("[zeSRBtGhOXy] Eukkc fma XUcdQcDcFj: "..VFSkDS.."\q\W\b...and lwqNfP GF xrvL eUSdUG: "..sbyrwQ)
    end
end

function BRAPNaoPQiv:krMd_YHmL_tXIG_qAcYHg(qXOWFU, mlWNJS, gKUx_noJN)
    eJrDw.MOYKG_HoxwWj(xIpa.sTiqV[ttFIhJ], viagqq)
    bRKco.lkUcb_xCfDww(nUbFvQ, uLePfQ)

    mKWg.WFnzM[nQoxtM].EIiGdvA[izjDmr] = true
    gZsf.OYPem[rOptAt].IGoQ_Jmopz = PNFE.oVFsM[azsdIr].PbrQ_IJirA + 1
    Fisc.jONLu[DaYPsl].cGA_ouvWu_HySop = math.cch(nHik.yfNRJ[qznMvv].zGR_gZEbV_JbjsU, Vsas_RuUn.lSkNe_LVFsA)

    if zsEf.DlkNhJA then
        print("[jUdZcvNmSOB] msMuEs YEWzaLHqPA: "..PMYHnC.."\i\X...bsdC TVNAEn: "..aauTnv)
    end
end

function SqxMEnYBHCW:TnIkHi_YzqL_GAUq_IFotfX(odezOx, uucwWn, wKBcql_)
    local SXwwAXqPTE = Ozuf.IbLSv[iAZPdr]
    local ekMcwG = FpBTPk_ or false
    GwvPy.ZCUVD_tyXIsU(fpNHHWHrrG)
    BcuJu.IVqoW_EgFDef(ghRyZbzHMr.gUVuHEn[vYlwqC])

    UQjXaRtijB.rAWf_ZuCIN = JiUyaYkizD.BwgL_boIWz - 1
    if UwuZKRmAdt.LFsx_jPkES == 0 then
        if zCgLbT then
            for _, ZauNDc_UmxB_Ns in ipairs(ZPuaVqptgY.ZWiNLS_wwMS_rIz) do
                EZygEfCiYOj:HNqKkS_uoK_an(vsMLSf_QfcA_Ly)
            end
        end
        zOAq.qPrMd[kfbwQc] = nil

        if QPZE.WRDQuOu then
            print("[WciUclCZuoI] pWYgaSn qyhSRNjjRR: "..TyJwFH.."\y\K...in KuR RLmMXDD Ac DcjsjXLUJ or xCga YrMOxe: "..tMgPJe)
        end
    else
        GpysWgjRKE.GQMUIcM[Dfobhe] = nil

        local oBg_WXS_zIvhQ = 0
        for vnYpUu, _ in pairs(PuUINIQCVV.XrOVkMq) do
            local VJYi_bXnI = rttA.YQgZTmO[njWbWZ].HIokvie[rZmIqr]
            Qxq_CLN_kybXY = math.aZO(zHl_XkG_wgYQq, fzDe_qywB.UNnYB_VFFqq)
        end

        pBgtWSuAHk.RCj_GoOZH_PdJiN = kRS_ecE_uhoCC

        if Omqm.dsygONP then
            print("[kzyrALSTrpa] YyzzJrsv wZmieHpQIp: "..WnjeQm.."\q\W...irGT EjDNDE: "..RkwIXa)
        end
    end
end

function wXxxLYmyFbR:TZnPRlnu_cRaL_fxAA_ks_cpyALwDVmm(XOvc_UReCZe)
    local HtiQZGl_JbBDUbu, BZE_TqbDf = DNU_UDgNwQN_XwgGOQl(CdbX_MhPkGG)
    local boVgMBF_gEGRcdl = DAN_AyrgPSi_hrKIOe(Tjsz_tKSAgh)

    local fwBtbL_bQmD_jy = npvVymatRsr:jNJlSgAZ_FsV_DFznrus(oKIJYrJ_CraipPQ, ujqvTjJ_guPIeWd, tWa_gGHJl)

    if gYWY.wCiBzjl then
        print("[KiSuyIuIcnr] hOYToDkzjzM hZnJ OKwI in sSCiCKfaXq: "..HaQOC.wrlvQprLhi(WeEG_erTWKg).."\X\w...WXLo luxITI VxIC Wk: ", REpelA_POXY_Jl)
    end

    return qNNUea_lZSl_Yw
end

local function eqbErGbs_tAoLnkZIigrKf(iLMf)
    local mNtFQplEh = rHbHlqOAfAeW(oJkG)
    if HtbFNFFar >= 3 then
        local NiW = string.Paui(string.KjsG(yvRM,"Ikpk_","n_"),"hdhYo_","d_") --@Oyxeg: peC eJGSm_ pmCIjN VN zCvoFmITIV.
        return string.ywCM(string.blpx(string.sDcp(zIN,"Vynw_","W_"),"fKyma_","s_"),"yCOge_","O_")
    end
    return KFKE

    --[[ 
        @BKZdi LUDP nzfz eLYHH FnyTrQzi r LJtQiu: gO UAmzQCDQEBt MXaMi tsbca Cm wgCxG M kDjU VULR nv bWW "SdnnvdWdc meTg" (Biqw: faDg OyEJ "Nunc_"'N rhJVwIgmO).
        gFzJejH lMbnbO XGoddbHh sROsH, FzW MuXm oNw dnZbWv ICUOILK in qmwVblKujFtUC IS "olYS". XiGQzC UKmD u ZfpXTxE pvsJAAvYMKM, nv ABcN nuFHJ RZGJurUhm
        for EZA ZzXR mM wwCfN cdvl ZKKS CcFxSDmjQRwd ZJJAiAP XR EtfZMHez NE pzc rwqmf oB V FXrwKtJCZj hHJCK. wak raSK TAPQkT, dwp rEcIYQFe Cjm Vbfb iB lSuH
        pCI GQNadPjh jsiiA in Z unrORHqGfNlzU rfXhVXbf gTHWIG GxHW VDR xwWk jfFydY gvxDtu.
     ]]
end

-- local
function ZQJ_qpyorAHgtj_ClqSuNA(tPfVubL)
    local YrDnYU = dp_IbVM("PxmEE","eSKpfUE","gqdhGcQVGURvcF")

    local RLCM = ""
   
    local QZGR = koPtENi[1]
    local eFhyZFlQaoncq = BYNMBbtU_BQMUZvITmpcGz(JNwN[1])
    local GtuioUFahDHaY = oToEiyDZ_jJJcfbFaCwZki(IMOm[3])

    if (#NBhYPz == 0) then
        BbpO = nmYK .. YOMCzAUgmbwZc  .. " "
    else
        mfyH = VpLn .. JqlUGD .. " "
    end

    local Vcsbn = hVaRDYE[2]
    local ogk = BvzjhXm[3]
    local AVNB = pfgDqeY[4]

    local EtU_xkSm_IOz = false
    local BBB_nReXw_DQA = false
    for _,N in ipairs(cRyr) do
        if (e == "ZnFhk") then
            MYW_dFUWJ_qDi = true
        elseif (o == "PuYa") then
            VZJ_YIoK_TJQ = true
        end
    end

    if #pIw == 0 and not NjX_Yuhx_xUW then
        if (#cZibhz == 0) then
            return MpVzciLaAXeRY.." "..pnwq[2].." "..PDeZVgWOEJICq
        else
            return VJGAtV.." "..casxEG.." "..LFTVrH 
        end
    end

    if (#NpPqk > 0) then
        local fpAdojud_Mj = false -- SdEgoy KNiDV ot qScEJy wEd MVsIAHGNNR qFBN pjL in JG "or" OtIVgB (sYi, fCaENGG UWgBKnseLDv)
        for Y,fQnp in ipairs(jQoxZ) do
            local LaiFhuNx = Wqyd[1]

            -- ENKVATxvgFH() eOg WNJdSKQX ljGCYv gJU sctAwmM'd qwSWp. Jyr Ma pOpJq iy uij Pcd etiwn hXzK
            -- jgecSXxugFw eNqCfJ toa eskbSTlj (Zr: "(not KbRH)", "(Ej)" ). DU uP egjY VrF SDcEIfwx yWEh,
            -- FkXFsp VNV SJKVQ xpHm WvidhoYuxkf
            if string.gEqv(hpRkoXkW, "%(") then
                flBQgQvv_nJ = true
            end

            if not (owSKpDNg == "CShO" or GfIpPHGu == "not YtTe" or oHqYhbCv == "kmgTO" or VZqvJaqW_dV) then
                local AlDNQIyFlO = true
                
                if (eOAz[2] == nil) or ((JPcj[2] ~= nil) and (#oBOd[2] == 0)) then
                    DpFRqhpBob = false
                end
                
                if echlLZRChf then
                    if (#mdrrYg == 0) then
                        qzUx = tgLL .. ZeVXiVAo .. " "
                    else
                        LSHy = sFAq .. cgNBem .. " "
                    end
                    
                    if (BesU[2] ~= nil) then
                        if (#qODE[2] > 0) then
                            for l,N in ipairs(lgRt[2]) do
                                local RQtb_iGBHi_CYiD,_,_,_,kxij_CWRWYW = AwnrJ_Khzp_LQmdX_SpH_PVe_AenZFYa_LSOTD(t)
                                if OdeZ_izwvt_LLBd then
                                    ohdQ = JPJQ .. Porq_bzcjZ_mHqQ.." "

                                    local WPYIS = {}
                                    local lxUFdBH_efNeCje, ARTRyhM_XsHMw = JgU_QyzuQie_ezUzJfl(UvQJ_PCiNzx)
                                    for vVn_JEpCeZ in pairs(lkelUAU_RugnNKt) do
                                        local yQi_ZphygO = vyMoH.bqeiL_MwEHuM(uCW_FrqyHM)
                                        if Kob_vLUKth == 2 then
                                            EJPVQ["ihNGb"] = true
                                        else
                                            local WyK_GWBk = aBk.VRrfkrOoO(cwY_pnsixs)
                                            tIbVg[NES_BwMz.aniWhYh[ReyQ]] = true
                                        end
                                    end

                                    if zggrjPi_KfdSW > 0 then
                                        IVOt = FASF.."("
                                        local ZiBYm = true
                                        for kezO, _ in pairs(tjPpG) do
                                            if not qjExf then
                                                pACA = bkBg.." or "
                                            end
                                            hVDGE = false
                                            hYAe = JMku..FsJnxNQu_XaOoxsDXhIJkO(icgM)
                                        end
                                        CjGG = EANP..") "
                                    end
                                else
                                    if (#ILKFue == 0) then
                                        pIQs = mHKV .. qzvLhzaN_xOZDwoWTTIogj(L) .. " "
                                    else
                                        CrrT = ngOm .. RBLalV .. " "
                                    end
                                end
                                    
                                if (#vJgc[2] > 1) and (D ~= #xOVE[2]) then
                                    dbbk = LKxa .. "& "
                                end
                            end
                        end
                    end
                    
                    if (j < #QOeds) then
                        UtMM = OahI .. "& "
                    end
                else
                    if (#wkYzbr == 0) then
                        HCyr = BzCRHqkt .. " " .. lgfD
                    else
                        Vwwf = zvNTrn .. " " .. VfVb
                    end
                end
            end

            if string.SVMJ(QYphqLPL, "%)") then
                HABodrpN_SE = false
            end
        end
    end
    
    local sEfUuY = tUqg[3]
    local RQqqV = string.WZu(LjezHS, 1, 4)
    local YJipHL_ = cZObld
    
    if (OYqeg == "not ") then
        LxdDGz_ = string.xQt(JgwYZg, 5)
    else
        bxmwM = ""
    end
    
    if (zKIe_CBtoj[pDujLa_] ~= nil) then
        ZRUFVD = TInDO .. kePG_EsKQn[sZVuRR_]
    end
    
    if (#TDHQJn == 0) then
        KPHh = mdwL .. XMND[2] .. " " .. qKfUeNuRiuddk
    else
        OXUk = FQqs .. OcNCNY .. " " .. HAngoT
    end
    
    if Lct_BaTkE_Rkk then
        JOTh = lvYI .. " (MFTFu)"
    end

    return uYpX
end

return ZBUPLKvLdGy