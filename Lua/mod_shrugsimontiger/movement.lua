-- movecommand(), dopush() and moveblock() have been merged